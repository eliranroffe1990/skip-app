<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#A8D5BA">
  <title>SKIPAPP - Smart Savings Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    html, body { height: 100%; overflow: hidden; }
    body { 
      font-family: 'Assistant', 'Robik', sans-serif; 
      background: linear-gradient(135deg, #A8D5BA 0%, #D4E9DF 100%); 
      min-height: 100vh; 
    }
    body.en { font-family: 'Roboto', 'Arial', sans-serif; }
    
    :root {
      --primary: #A8D5BA;
      --primary-dark: #7EBA9B;
      --secondary: #FFD9A0;
      --accent: #FFB88C;
      --bg: #FFFCF7;
      --text: #3D3D3D;
      --text-light: #757575;
      --success: #90D4A8;
      --danger: #FF9B9B;
      --card-bg: #FFFFFF;
    }
    
    .app { width: 100%; height: 100vh; max-width: 500px; margin: 0 auto; background: var(--bg); position: relative; overflow: hidden; }
    
    @media (min-width: 501px) {
      body { display: flex; justify-content: center; align-items: center; padding: 20px; }
      .app { height: 90vh; max-height: 850px; border-radius: 40px; box-shadow: 0 30px 80px rgba(0,0,0,0.15); }
    }
    
    .screen { display: none; width: 100%; height: 100%; flex-direction: column; overflow: hidden; }
    .screen.active { display: flex; animation: fadeIn 0.4s ease; }
    
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 20px;
      text-align: center;
      border-radius: 0 0 30px 30px;
      box-shadow: 0 4px 20px rgba(168, 213, 186, 0.3);
      position: relative;
    }
    
    .header h1 { font-size: 32px; font-weight: 700; letter-spacing: -0.5px; margin-bottom: 5px; }
    .header .subtitle { font-size: 15px; opacity: 0.9; font-weight: 400; }
    
    .nav-buttons {
      position: absolute;
      top: 20px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
      z-index: 10;
    }
    
    .nav-btn-top {
      background: rgba(255,255,255,0.3);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.3s ease;
    }
    
    .nav-btn-top:active { transform: scale(0.9); }
    
    .content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      -webkit-overflow-scrolling: touch;
    }
    
    .card {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 15px rgba(0,0,0,0.06);
    }
    
    .btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 16px;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      letter-spacing: -0.3px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(168, 213, 186, 0.3);
    }
    
    .btn-primary:active { transform: translateY(2px); }
    
    .btn-secondary {
      background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
      color: var(--text);
      box-shadow: 0 6px 20px rgba(255, 217, 160, 0.3);
    }
    
    input, select {
      width: 100%;
      padding: 15px;
      border: 2px solid #E8E8E8;
      border-radius: 12px;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.3s ease;
      background: white;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(168, 213, 186, 0.1);
    }
    
    .form-group { margin-bottom: 18px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text); font-size: 15px; }
    
    .lang-selector {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .lang-btn {
      flex: 1;
      padding: 15px;
      border: 2px solid #E8E8E8;
      border-radius: 12px;
      background: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .lang-btn.active {
      border-color: var(--primary);
      background: rgba(168, 213, 186, 0.1);
      color: var(--primary-dark);
    }
    
    .investment-links {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .investment-link {
      display: flex;
      align-items: center;
      padding: 18px;
      background: white;
      border-radius: 14px;
      text-decoration: none;
      color: var(--text);
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    
    .investment-link:active {
      transform: scale(0.98);
    }
    
    .investment-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
      margin-right: 15px;
    }
    
    body.en .investment-icon {
      margin-right: 0;
      margin-left: 15px;
    }
    
    .investment-text {
      flex: 1;
      text-align: right;
    }
    
    body.en .investment-text {
      text-align: left;
    }
    
    .investment-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .investment-desc {
      font-size: 13px;
      color: var(--text-light);
    }
    
    .history-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .history-table th {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 15px;
      font-weight: 600;
      text-align: center;
    }
    
    .history-table td {
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
      text-align: center;
    }
    
    .history-table tr:last-child td {
      border-bottom: none;
    }
    
    .summary-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .summary-card {
      background: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 2px 15px rgba(0,0,0,0.06);
    }
    
    .summary-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 8px;
    }
    
    .summary-label {
      font-size: 14px;
      color: var(--text-light);
      font-weight: 500;
    }
    
    .success-banner {
      background: linear-gradient(135deg, var(--success) 0%, #7FC99C 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(144, 212, 168, 0.3);
    }
    
    .success-banner h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .success-banner p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-light);
    }
    
    .empty-icon {
      font-size: 60px;
      margin-bottom: 20px;
      opacity: 0.3;
    }
    
    .play-icon {
      width: 120px;
      height: 120px;
      margin: 40px auto 30px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 40px rgba(168, 213, 186, 0.4);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .play-icon::before {
      content: '';
      width: 0;
      height: 0;
      border-top: 25px solid transparent;
      border-bottom: 25px solid transparent;
      border-right: 40px solid white;
      margin-right: -5px;
    }
    
    body.en .play-icon::before {
      border-right: none;
      border-left: 40px solid white;
      margin-right: 0;
      margin-left: -5px;
    }
    
    .feature-list {
      text-align: right;
      margin: 30px 0;
    }
    
    body.en .feature-list {
      text-align: left;
    }
    
    .feature-item {
      padding: 15px;
      margin-bottom: 10px;
      background: white;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }
    
    .feature-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
    }
    
    .feature-text {
      font-size: 15px;
      font-weight: 500;
      color: var(--text);
      text-align: right;
    }
    
    body.en .feature-text {
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Welcome Screen -->
    <div class="screen active" id="welcome">
      <div class="header">
        <h1 data-lang="app_name">SKIPAPP</h1>
        <div class="subtitle" data-lang="app_tagline">×“×œ×’ ×¢×œ ×”×”×•×¦××”, ×¦×‘×•×¨ ×œ×¢×ª×™×“</div>
      </div>
      
      <div class="content">
        <div style="text-align: center; padding: 40px 30px;">
          <div class="play-icon"></div>
          
          <div style="font-size: 48px; font-weight: 800; background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 15px; letter-spacing: -1px;">SKIPAPP</div>
          <div style="font-size: 18px; color: var(--text-light); margin-bottom: 40px; font-weight: 500;" data-lang="welcome_subtitle">××©×—×§ ×”×—×™×¡×›×•×Ÿ ×©×™×©× ×” ×œ×š ××ª ×”×—×™×™×</div>
          
          <div class="feature-list">
            <div class="feature-item">
              <div class="feature-icon">âœ“</div>
              <div class="feature-text" data-lang="feature_1">×ª×¢×“ ×›×œ ×¨×›×™×©×” ×©×•×•×™×ª×¨×ª ×¢×œ×™×”</div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">ğŸ’°</div>
              <div class="feature-text" data-lang="feature_2">×¦×‘×•×¨ × ×§×•×“×•×ª ×•×¨××” ××ª ×”×—×™×¡×›×•×Ÿ ×©×œ×š</div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">ğŸ“Š</div>
              <div class="feature-text" data-lang="feature_3">×¢×§×•×‘ ××—×¨×™ ×”×”×ª×§×“××•×ª ×©×œ×š</div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">ğŸ¯</div>
              <div class="feature-text" data-lang="feature_4">×”×©×’ ××˜×¨×•×ª ×•×”×ª×¤×ª×—</div>
            </div>
          </div>
          
          <button class="btn btn-primary" onclick="checkRegistration()" data-lang="btn_start">×‘×•××• × ×ª×—×™×œ!</button>
        </div>
      </div>
    </div>

    <!-- Register Screen -->
    <div class="screen" id="register">
      <div class="header">
        <div class="nav-buttons">
          <button class="nav-btn-top" onclick="showScreen('welcome')">â†</button>
        </div>
        <h1 data-lang="register_title">×”×¨×©××”</h1>
        <div class="subtitle" data-lang="register_subtitle">×‘×•××• × ×›×™×¨!</div>
      </div>
      
      <div class="content">
        <div class="card">
          <div class="form-group">
            <label data-lang="lang_label">×‘×—×¨ ×©×¤×” / Choose Language</label>
            <div class="lang-selector">
              <button class="lang-btn active" onclick="setLanguage('he')" data-lang-btn="he">ğŸ‡®ğŸ‡± ×¢×‘×¨×™×ª</button>
              <button class="lang-btn" onclick="setLanguage('en')" data-lang-btn="en">ğŸ‡¬ğŸ‡§ English</button>
            </div>
          </div>
          
          <form id="registerForm" onsubmit="saveRegistration(event)">
            <div class="form-group">
              <label data-lang="first_name_label">×©× ×¤×¨×˜×™</label>
              <input type="text" id="firstName" data-lang-placeholder="first_name_placeholder" placeholder="××™×š ×§×•×¨××™× ×œ×š?" required>
            </div>
            
            <div class="form-group">
              <label data-lang="age_label">×’×™×œ</label>
              <input type="number" id="age" data-lang-placeholder="age_placeholder" placeholder="×›××” ××ª×” ×‘×Ÿ/×‘×ª?" required min="1" max="120">
            </div>
            
            <div class="form-group">
              <label data-lang="goal_label">××˜×¨×ª ×—×™×¡×›×•×Ÿ (××•×¤×¦×™×•× ×œ×™)</label>
              <input type="text" id="goal" data-lang-placeholder="goal_placeholder" placeholder="×œ××” ××ª×” ×—×•×¡×š?">
            </div>
            
            <button type="submit" class="btn btn-primary" data-lang="btn_start_saving">×”×ª×—×œ ×œ×—×¡×•×š! ğŸš€</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Home Screen -->
    <div class="screen" id="home">
      <div class="header">
        <h1>SKIPAPP</h1>
        <div class="subtitle"><span data-lang="hello">×©×œ×•×</span>, <span id="userName">××©×ª××©</span>!</div>
      </div>
      
      <div class="content">
        <button class="btn btn-primary" onclick="showScreen('addSkip')" style="margin-bottom: 15px;" data-lang="btn_add_skip">
          + ×”×•×¡×£ ×“×™×œ×•×’ ×—×“×©
        </button>
        
        <button class="btn btn-secondary" onclick="showScreen('settings')" style="margin-bottom: 15px;" data-lang="btn_settings">
          âš™ï¸ ×”×’×“×¨×•×ª
        </button>
      </div>
    </div>

    <!-- Add Skip Screen -->
    <div class="screen" id="addSkip">
      <div class="header">
        <div class="nav-buttons">
          <button class="nav-btn-top" onclick="showScreen('home')">â†</button>
          <button class="nav-btn-top" onclick="showScreen('home')">ğŸ </button>
        </div>
        <h1 data-lang="add_skip_title">×“×™×œ×•×’ ×—×“×©</h1>
        <div class="subtitle" data-lang="add_skip_subtitle">×ª×¢×“ ×¨×›×™×©×” ×©×“×™×œ×’×ª ×¢×œ×™×”</div>
      </div>
      
      <div class="content">
        <form id="skipForm" onsubmit="addSkip(event)">
          <div class="form-group">
            <label data-lang="category_label">×§×˜×’×•×¨×™×”</label>
            <select id="category" required>
              <option value="" data-lang="category_select">×‘×—×¨ ×§×˜×’×•×¨×™×”</option>
              <option value="××•×›×œ ×•××©×§××•×ª" data-lang="cat_food">ğŸ• ××•×›×œ ×•××©×§××•×ª</option>
              <option value="××•×¤× ×” ×•×‘×™×’×•×“" data-lang="cat_fashion">ğŸ‘• ××•×¤× ×” ×•×‘×™×’×•×“</option>
              <option value="×‘×™×“×•×¨" data-lang="cat_entertainment">ğŸ¬ ×‘×™×“×•×¨</option>
              <option value="×˜×›× ×•×œ×•×’×™×”" data-lang="cat_tech">ğŸ“± ×˜×›× ×•×œ×•×’×™×”</option>
              <option value="×™×•×¤×™ ×•×˜×™×¤×•×—" data-lang="cat_beauty">ğŸ’„ ×™×•×¤×™ ×•×˜×™×¤×•×—</option>
              <option value="×ª×—×‘×•×¨×”" data-lang="cat_transport">ğŸš— ×ª×—×‘×•×¨×”</option>
              <option value="×× ×•×™×™×" data-lang="cat_subscriptions">ğŸ“º ×× ×•×™×™×</option>
              <option value="×§× ×™×•×ª ×“×—×£" data-lang="cat_impulse">ğŸ›ï¸ ×§× ×™×•×ª ×“×—×£</option>
              <option value="×—×‘×¨×ª×™" data-lang="cat_social">ğŸ‰ ×—×‘×¨×ª×™</option>
              <option value="××—×¨" data-lang="cat_other">ğŸ“¦ ××—×¨</option>
            </select>
          </div>
          
          <div class="form-group">
            <label data-lang="amount_label">×¡×›×•× (â‚ª)</label>
            <input type="number" id="amount" data-lang-placeholder="amount_placeholder" placeholder="×›××” ×—×¡×›×ª?" required min="1" step="0.01">
          </div>
          
          <div class="form-group">
            <label data-lang="description_label">×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)</label>
            <input type="text" id="description" data-lang-placeholder="description_placeholder" placeholder="×¢×œ ××” ×•×™×ª×¨×ª?">
          </div>
          
          <button type="submit" class="btn btn-primary" data-lang="btn_save_continue">×©××•×¨ ×•×”××©×š</button>
        </form>
      </div>
    </div>

    <!-- Investment Channels Screen -->
    <div class="screen" id="investmentChannels">
      <div class="header">
        <div class="nav-buttons">
          <button class="nav-btn-top" onclick="goBack()">â†</button>
          <button class="nav-btn-top" onclick="showScreen('home')">ğŸ </button>
        </div>
        <h1 data-lang="investment_title">××¤×™×§×™ ×”×©×§×¢×”</h1>
        <div class="subtitle" data-lang="investment_subtitle">×œ××“ ××™×š ×œ×”×©×§×™×¢ ××ª ×”×—×™×¡×›×•×Ÿ ×©×œ×š</div>
      </div>
      
      <div class="content">
        <div class="card" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%); color: var(--text); margin-bottom: 20px;">
          <h3 style="margin-bottom: 10px; font-size: 20px;" data-lang="investment_intro_title">×œ××” ×—×©×•×‘ ×œ×”×©×§×™×¢?</h3>
          <p style="font-size: 15px; line-height: 1.6;" data-lang="investment_intro_text">
            ×”×—×™×¡×›×•×Ÿ ×©×œ×š ×™×›×•×œ ×œ×’×“×•×œ! ×œ××“ ×¢×œ ×“×¨×›×™× ×—×›××•×ª ×œ×”×©×§×™×¢ ××ª ×”×›×¡×£ ×©×—×¡×›×ª.
          </p>
        </div>
        
        <div class="investment-links">
          <a href="https://www.supermarker.themarker.com/Investments/WhatIs-CompoundInterest.aspx" target="_blank" class="investment-link">
            <div class="investment-icon">ğŸ“ˆ</div>
            <div class="investment-text">
              <div class="investment-title" data-lang="link_compound">×¨×™×‘×™×ª ×“×¨×™×‘×™×ª</div>
              <div class="investment-desc" data-lang="link_compound_desc">×”×›×•×— ×”×§×¡×•× ×©××’×“×™×œ ××ª ×”×›×¡×£</div>
            </div>
          </a>
          
          <a href="https://www.globes.co.il/news/article.aspx?did=1001420080" target="_blank" class="investment-link">
            <div class="investment-icon">ğŸŒ±</div>
            <div class="investment-text">
              <div class="investment-title" data-lang="link_young">×—×™×¡×›×•×Ÿ ××’×™×œ ×¦×¢×™×¨</div>
              <div class="investment-desc" data-lang="link_young_desc">×œ××” ×›×“××™ ×œ×”×ª×—×™×œ ××•×§×“×?</div>
            </div>
          </a>
          
          <a href="https://financa.co.il/××¤×™×§×™-×”×©×§×¢×”-××•××œ×¦×™×/" target="_blank" class="investment-link">
            <div class="investment-icon">ğŸ’¼</div>
            <div class="investment-text">
              <div class="investment-title" data-lang="link_channels">××¤×™×§×™ ×”×©×§×¢×”</div>
              <div class="investment-desc" data-lang="link_channels_desc">×”×™×›×Ÿ ×›×“××™ ×œ×”×©×§×™×¢?</div>
            </div>
          </a>
          
          <a href="https://www.supermarker.themarker.com/Investments/InvestingInStocks.aspx" target="_blank" class="investment-link">
            <div class="investment-icon">ğŸ“Š</div>
            <div class="investment-text">
              <div class="investment-title" data-lang="link_stocks">××”×™ ×× ×™×”?</div>
              <div class="investment-desc" data-lang="link_stocks_desc">×”×‘× ×ª ×”×©×§×¢×” ×‘×× ×™×•×ª</div>
            </div>
          </a>
          
          <a href="https://www.globes.co.il/news/article.aspx?did=1000483243" target="_blank" class="investment-link">
            <div class="investment-icon">ğŸ“œ</div>
            <div class="investment-text">
              <div class="investment-title" data-lang="link_bonds">××”×• ××’"×—?</div>
              <div class="investment-desc" data-lang="link_bonds_desc">×”×‘× ×ª ××’×¨×•×ª ×—×•×‘</div>
            </div>
          </a>
        </div>
        
        <button class="btn btn-primary" onclick="showScreen('historyTable')" style="margin-top: 20px;" data-lang="btn_continue">×”××©×š</button>
      </div>
    </div>

    <!-- History Table Screen -->
    <div class="screen" id="historyTable">
      <div class="header">
        <div class="nav-buttons">
          <button class="nav-btn-top" onclick="goBack()">â†</button>
          <button class="nav-btn-top" onclick="showScreen('home')">ğŸ </button>
        </div>
        <h1 data-lang="history_title">×”×™×¡×˜×•×¨×™×™×ª ×“×™×œ×•×’×™×</h1>
        <div class="subtitle" data-lang="history_subtitle">×›×œ ×”×“×™×œ×•×’×™× ×©×œ×š ×‘××‘×˜ ××—×“</div>
      </div>
      
      <div class="content">
        <div class="card" style="padding: 0; overflow-x: auto;">
          <table class="history-table" id="historyTableContent">
            <thead>
              <tr>
                <th data-lang="table_date">×ª××¨×™×š</th>
                <th data-lang="table_category">×§×˜×’×•×¨×™×”</th>
                <th data-lang="table_amount">×¡×›×•×</th>
                <th data-lang="table_points">× ×§×•×“×•×ª</th>
              </tr>
            </thead>
            <tbody id="historyTableBody">
              <tr>
                <td colspan="4">
                  <div class="empty-state">
                    <div class="empty-icon">ğŸ“</div>
                    <div data-lang="no_skips">××™×Ÿ ×“×™×œ×•×’×™× ×¢×“×™×™×Ÿ</div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <button class="btn btn-primary" onclick="showScreen('summary')" style="margin-top: 20px;" data-lang="btn_continue">×”××©×š</button>
      </div>
    </div>

    <!-- Summary Screen -->
    <div class="screen" id="summary">
      <div class="header">
        <div class="nav-buttons">
          <button class="nav-btn-top" onclick="goBack()">â†</button>
          <button class="nav-btn-top" onclick="showScreen('home')">ğŸ </button>
        </div>
        <h1 data-lang="summary_title">×¡×™×›×•×</h1>
        <div class="subtitle" data-lang="summary_subtitle">×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×™×©×’×™× ×©×œ×š!</div>
      </div>
      
      <div class="content">
        <div class="success-banner">
          <h2 data-lang="summary_congrats">ğŸ‰ ×›×œ ×”×›×‘×•×“!</h2>
          <p data-lang="summary_congrats_text">××ª×” ×‘×“×¨×š ×”× ×›×•× ×” ×œ×¢×ª×™×“ ×¤×™× × ×¡×™ ×˜×•×‘ ×™×•×ª×¨</p>
        </div>
        
        <div class="summary-stats">
          <div class="summary-card">
            <div class="summary-value" id="summaryTotalSkips">0</div>
            <div class="summary-label" data-lang="summary_total_skips">×¡×”"×› ×“×™×œ×•×’×™×</div>
          </div>
          <div class="summary-card">
            <div class="summary-value" id="summaryTotalSavings">â‚ª0</div>
            <div class="summary-label" data-lang="summary_total_savings">×¡×”"×› ×—×¡×›×•×Ÿ</div>
          </div>
          <div class="summary-card">
            <div class="summary-value" id="summaryTotalPoints">0</div>
            <div class="summary-label" data-lang="summary_total_points">×¡×”"×› × ×§×•×“×•×ª</div>
          </div>
          <div class="summary-card">
            <div class="summary-value" id="summaryAvgSkip">â‚ª0</div>
            <div class="summary-label" data-lang="summary_avg_skip">×××•×¦×¢ ×“×™×œ×•×’</div>
          </div>
        </div>
        
        <div class="card">
          <h3 style="margin-bottom: 15px; color: var(--text); font-size: 18px;" data-lang="summary_insights">×ª×•×‘× ×•×ª</h3>
          <p style="font-size: 15px; line-height: 1.8; color: var(--text-light);" id="summaryInsights" data-lang="summary_insights_text">
            ×”××©×š ×›×š! ×›×œ ×“×™×œ×•×’ ×”×•× ×¦×¢×“ × ×•×¡×£ ×œ×¢×‘×¨ ×”×—×•×¤×© ×”×¤×™× × ×¡×™ ×©×œ×š.
          </p>
        </div>
        
        <button class="btn btn-primary" onclick="showScreen('home')" data-lang="btn_back_home">×—×–×¨×” ×œ×“×£ ×”×‘×™×ª</button>
      </div>
    </div>

    <!-- Settings Screen -->
    <div class="screen" id="settings">
      <div class="header">
        <div class="nav-buttons">
          <button class="nav-btn-top" onclick="showScreen('home')">â†</button>
          <button class="nav-btn-top" onclick="showScreen('home')">ğŸ </button>
        </div>
        <h1 data-lang="settings_title">×”×’×“×¨×•×ª</h1>
        <div class="subtitle" data-lang="settings_subtitle">×”×ª×× ××™×©×™×ª ××ª ×”×—×•×•×™×”</div>
      </div>
      
      <div class="content">
        <div class="card">
          <h3 style="margin-bottom: 15px; color: var(--text); font-size: 18px;" data-lang="profile_title">×¤×¨×•×¤×™×œ ×©×œ×™</h3>
          <div style="color: var(--text-light); line-height: 1.8;">
            <p><strong data-lang="profile_name">×©×:</strong> <span id="profileName">-</span></p>
            <p><strong data-lang="profile_age">×’×™×œ:</strong> <span id="profileAge">-</span></p>
            <p><strong data-lang="profile_goal">××˜×¨×”:</strong> <span id="profileGoal">-</span></p>
            <p><strong data-lang="profile_lang">×©×¤×”:</strong> <span id="profileLang">×¢×‘×¨×™×ª</span></p>
          </div>
        </div>
        
        <div class="card">
          <h3 style="margin-bottom: 15px; color: var(--text); font-size: 18px;" data-lang="about_title">××•×“×•×ª SKIPAPP</h3>
          <p style="color: var(--text-light); line-height: 1.6; margin-bottom: 10px;" data-lang="about_text">
            SKIPAPP ×”×™× ××¤×œ×™×§×¦×™×” ×—×™× ×•×›×™×ª ×©××‘×•×¡×¡×ª ×¢×œ ××—×§×¨ ×‘×›×œ×›×œ×” ×”×ª× ×”×’×•×ª×™×ª. 
            ×”××¤×œ×™×§×¦×™×” ××œ××“×ª ××•×¨×™×™× ×•×ª ×¤×™× × ×¡×™×ª ×‘×××¦×¢×•×ª ×ª×™×¢×•×“ ×”×•×¦××•×ª ×©× ×× ×¢×•.
          </p>
          <p style="color: var(--text-light); line-height: 1.6;">
            <span data-lang="about_version">×’×¨×¡×”: 4.0 (×¨×‘-×œ×©×•× ×™×ª)</span><br>
            <span data-lang="about_developer">×¤×•×ª×— ×¢×œ ×™×“×™: ×“"×¨ ××œ×™×¨×Ÿ</span><br>
            <span data-lang="about_method">××‘×•×¡×¡ ×¢×œ ××ª×•×“×•×œ×•×’×™×™×ª AST</span>
          </p>
        </div>
        
        <div class="card">
          <h3 style="margin-bottom: 15px; color: var(--text); font-size: 18px;" data-lang="actions_title">×¤×¢×•×œ×•×ª</h3>
          <button class="btn btn-secondary" onclick="changeLanguage()" style="margin-bottom: 10px;" data-lang="btn_change_lang">
            ğŸŒ ×©× ×” ×©×¤×”
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Translation dictionary
    const translations = {
      he: {
        app_name: 'SKIPAPP',
        app_tagline: '×“×œ×’ ×¢×œ ×”×”×•×¦××”, ×¦×‘×•×¨ ×œ×¢×ª×™×“',
        welcome_subtitle: '××©×—×§ ×”×—×™×¡×›×•×Ÿ ×©×™×©× ×” ×œ×š ××ª ×”×—×™×™×',
        feature_1: '×ª×¢×“ ×›×œ ×¨×›×™×©×” ×©×•×•×™×ª×¨×ª ×¢×œ×™×”',
        feature_2: '×¦×‘×•×¨ × ×§×•×“×•×ª ×•×¨××” ××ª ×”×—×™×¡×›×•×Ÿ ×©×œ×š',
        feature_3: '×¢×§×•×‘ ××—×¨×™ ×”×”×ª×§×“××•×ª ×©×œ×š',
        feature_4: '×”×©×’ ××˜×¨×•×ª ×•×”×ª×¤×ª×—',
        btn_start: '×‘×•××• × ×ª×—×™×œ!',
        register_title: '×”×¨×©××”',
        register_subtitle: '×‘×•××• × ×›×™×¨!',
        lang_label: '×‘×—×¨ ×©×¤×” / Choose Language',
        first_name_label: '×©× ×¤×¨×˜×™',
        first_name_placeholder: '××™×š ×§×•×¨××™× ×œ×š?',
        age_label: '×’×™×œ',
        age_placeholder: '×›××” ××ª×” ×‘×Ÿ/×‘×ª?',
        goal_label: '××˜×¨×ª ×—×™×¡×›×•×Ÿ (××•×¤×¦×™×•× ×œ×™)',
        goal_placeholder: '×œ××” ××ª×” ×—×•×¡×š?',
        btn_start_saving: '×”×ª×—×œ ×œ×—×¡×•×š! ğŸš€',
        hello: '×©×œ×•×',
        btn_add_skip: '+ ×”×•×¡×£ ×“×™×œ×•×’ ×—×“×©',
        btn_settings: 'âš™ï¸ ×”×’×“×¨×•×ª',
        add_skip_title: '×“×™×œ×•×’ ×—×“×©',
        add_skip_subtitle: '×ª×¢×“ ×¨×›×™×©×” ×©×“×™×œ×’×ª ×¢×œ×™×”',
        category_label: '×§×˜×’×•×¨×™×”',
        category_select: '×‘×—×¨ ×§×˜×’×•×¨×™×”',
        cat_food: 'ğŸ• ××•×›×œ ×•××©×§××•×ª',
        cat_fashion: 'ğŸ‘• ××•×¤× ×” ×•×‘×™×’×•×“',
        cat_entertainment: 'ğŸ¬ ×‘×™×“×•×¨',
        cat_tech: 'ğŸ“± ×˜×›× ×•×œ×•×’×™×”',
        cat_beauty: 'ğŸ’„ ×™×•×¤×™ ×•×˜×™×¤×•×—',
        cat_transport: 'ğŸš— ×ª×—×‘×•×¨×”',
        cat_subscriptions: 'ğŸ“º ×× ×•×™×™×',
        cat_impulse: 'ğŸ›ï¸ ×§× ×™×•×ª ×“×—×£',
        cat_social: 'ğŸ‰ ×—×‘×¨×ª×™',
        cat_other: 'ğŸ“¦ ××—×¨',
        amount_label: '×¡×›×•× (â‚ª)',
        amount_placeholder: '×›××” ×—×¡×›×ª?',
        description_label: '×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)',
        description_placeholder: '×¢×œ ××” ×•×™×ª×¨×ª?',
        btn_save_continue: '×©××•×¨ ×•×”××©×š',
        investment_title: '××¤×™×§×™ ×”×©×§×¢×”',
        investment_subtitle: '×œ××“ ××™×š ×œ×”×©×§×™×¢ ××ª ×”×—×™×¡×›×•×Ÿ ×©×œ×š',
        investment_intro_title: '×œ××” ×—×©×•×‘ ×œ×”×©×§×™×¢?',
        investment_intro_text: '×”×—×™×¡×›×•×Ÿ ×©×œ×š ×™×›×•×œ ×œ×’×“×•×œ! ×œ××“ ×¢×œ ×“×¨×›×™× ×—×›××•×ª ×œ×”×©×§×™×¢ ××ª ×”×›×¡×£ ×©×—×¡×›×ª.',
        link_compound: '×¨×™×‘×™×ª ×“×¨×™×‘×™×ª',
        link_compound_desc: '×”×›×•×— ×”×§×¡×•× ×©××’×“×™×œ ××ª ×”×›×¡×£',
        link_young: '×—×™×¡×›×•×Ÿ ××’×™×œ ×¦×¢×™×¨',
        link_young_desc: '×œ××” ×›×“××™ ×œ×”×ª×—×™×œ ××•×§×“×?',
        link_channels: '××¤×™×§×™ ×”×©×§×¢×”',
        link_channels_desc: '×”×™×›×Ÿ ×›×“××™ ×œ×”×©×§×™×¢?',
        link_stocks: '××”×™ ×× ×™×”?',
        link_stocks_desc: '×”×‘× ×ª ×”×©×§×¢×” ×‘×× ×™×•×ª',
        link_bonds: '××”×• ××’"×—?',
        link_bonds_desc: '×”×‘× ×ª ××’×¨×•×ª ×—×•×‘',
        btn_continue: '×”××©×š',
        history_title: '×”×™×¡×˜×•×¨×™×™×ª ×“×™×œ×•×’×™×',
        history_subtitle: '×›×œ ×”×“×™×œ×•×’×™× ×©×œ×š ×‘××‘×˜ ××—×“',
        table_date: '×ª××¨×™×š',
        table_category: '×§×˜×’×•×¨×™×”',
        table_amount: '×¡×›×•×',
        table_points: '× ×§×•×“×•×ª',
        no_skips: '××™×Ÿ ×“×™×œ×•×’×™× ×¢×“×™×™×Ÿ',
        summary_title: '×¡×™×›×•×',
        summary_subtitle: '×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×™×©×’×™× ×©×œ×š!',
        summary_congrats: 'ğŸ‰ ×›×œ ×”×›×‘×•×“!',
        summary_congrats_text: '××ª×” ×‘×“×¨×š ×”× ×›×•× ×” ×œ×¢×ª×™×“ ×¤×™× × ×¡×™ ×˜×•×‘ ×™×•×ª×¨',
        summary_total_skips: '×¡×”"×› ×“×™×œ×•×’×™×',
        summary_total_savings: '×¡×”"×› ×—×¡×›×•×Ÿ',
        summary_total_points: '×¡×”"×› × ×§×•×“×•×ª',
        summary_avg_skip: '×××•×¦×¢ ×“×™×œ×•×’',
        summary_insights: '×ª×•×‘× ×•×ª',
        summary_insights_text: '×”××©×š ×›×š! ×›×œ ×“×™×œ×•×’ ×”×•× ×¦×¢×“ × ×•×¡×£ ×œ×¢×‘×¨ ×”×—×•×¤×© ×”×¤×™× × ×¡×™ ×©×œ×š.',
        btn_back_home: '×—×–×¨×” ×œ×“×£ ×”×‘×™×ª',
        settings_title: '×”×’×“×¨×•×ª',
        settings_subtitle: '×”×ª×× ××™×©×™×ª ××ª ×”×—×•×•×™×”',
        profile_title: '×¤×¨×•×¤×™×œ ×©×œ×™',
        profile_name: '×©×:',
        profile_age: '×’×™×œ:',
        profile_goal: '××˜×¨×”:',
        profile_lang: '×©×¤×”:',
        about_title: '××•×“×•×ª SKIPAPP',
        about_text: 'SKIPAPP ×”×™× ××¤×œ×™×§×¦×™×” ×—×™× ×•×›×™×ª ×©××‘×•×¡×¡×ª ×¢×œ ××—×§×¨ ×‘×›×œ×›×œ×” ×”×ª× ×”×’×•×ª×™×ª. ×”××¤×œ×™×§×¦×™×” ××œ××“×ª ××•×¨×™×™× ×•×ª ×¤×™× × ×¡×™×ª ×‘×××¦×¢×•×ª ×ª×™×¢×•×“ ×”×•×¦××•×ª ×©× ×× ×¢×•.',
        about_version: '×’×¨×¡×”: 4.0 (×¨×‘-×œ×©×•× ×™×ª)',
        about_developer: '×¤×•×ª×— ×¢×œ ×™×“×™: ×“"×¨ ××œ×™×¨×Ÿ',
        about_method: '××‘×•×¡×¡ ×¢×œ ××ª×•×“×•×œ×•×’×™×™×ª AST',
        actions_title: '×¤×¢×•×œ×•×ª',
        btn_change_lang: 'ğŸŒ ×©× ×” ×©×¤×”'
      },
      en: {
        app_name: 'SKIPAPP',
        app_tagline: 'Skip the Expense, Save for the Future',
        welcome_subtitle: 'The savings game that will change your life',
        feature_1: 'Track every purchase you skipped',
        feature_2: 'Earn points and watch your savings grow',
        feature_3: 'Follow your progress',
        feature_4: 'Achieve goals and grow',
        btn_start: "Let's Start!",
        register_title: 'Registration',
        register_subtitle: "Let's get to know each other!",
        lang_label: 'Choose Language / ×‘×—×¨ ×©×¤×”',
        first_name_label: 'First Name',
        first_name_placeholder: "What's your name?",
        age_label: 'Age',
        age_placeholder: 'How old are you?',
        goal_label: 'Savings Goal (Optional)',
        goal_placeholder: 'What are you saving for?',
        btn_start_saving: 'Start Saving! ğŸš€',
        hello: 'Hello',
        btn_add_skip: '+ Add New Skip',
        btn_settings: 'âš™ï¸ Settings',
        add_skip_title: 'New Skip',
        add_skip_subtitle: 'Record a purchase you skipped',
        category_label: 'Category',
        category_select: 'Select Category',
        cat_food: 'ğŸ• Food & Drinks',
        cat_fashion: 'ğŸ‘• Fashion & Clothing',
        cat_entertainment: 'ğŸ¬ Entertainment',
        cat_tech: 'ğŸ“± Technology',
        cat_beauty: 'ğŸ’„ Beauty & Care',
        cat_transport: 'ğŸš— Transportation',
        cat_subscriptions: 'ğŸ“º Subscriptions',
        cat_impulse: 'ğŸ›ï¸ Impulse Shopping',
        cat_social: 'ğŸ‰ Social',
        cat_other: 'ğŸ“¦ Other',
        amount_label: 'Amount (â‚ª)',
        amount_placeholder: 'How much did you save?',
        description_label: 'Description (Optional)',
        description_placeholder: 'What did you skip?',
        btn_save_continue: 'Save & Continue',
        investment_title: 'Investment Channels',
        investment_subtitle: 'Learn how to invest your savings',
        investment_intro_title: 'Why is investing important?',
        investment_intro_text: 'Your savings can grow! Learn smart ways to invest the money you saved.',
        link_compound: 'Compound Interest',
        link_compound_desc: 'The magic power that grows your money',
        link_young: 'Saving from Young Age',
        link_young_desc: 'Why start early?',
        link_channels: 'Investment Channels',
        link_channels_desc: 'Where should you invest?',
        link_stocks: 'What is a Stock?',
        link_stocks_desc: 'Understanding stock investments',
        link_bonds: 'What is a Bond?',
        link_bonds_desc: 'Understanding bonds',
        btn_continue: 'Continue',
        history_title: 'Skip History',
        history_subtitle: 'All your skips at a glance',
        table_date: 'Date',
        table_category: 'Category',
        table_amount: 'Amount',
        table_points: 'Points',
        no_skips: 'No skips yet',
        summary_title: 'Summary',
        summary_subtitle: 'Great job on your achievements!',
        summary_congrats: 'ğŸ‰ Well Done!',
        summary_congrats_text: "You're on the right path to a better financial future",
        summary_total_skips: 'Total Skips',
        summary_total_savings: 'Total Savings',
        summary_total_points: 'Total Points',
        summary_avg_skip: 'Avg Skip',
        summary_insights: 'Insights',
        summary_insights_text: 'Keep it up! Every skip is another step towards your financial freedom.',
        btn_back_home: 'Back to Home',
        settings_title: 'Settings',
        settings_subtitle: 'Customize your experience',
        profile_title: 'My Profile',
        profile_name: 'Name:',
        profile_age: 'Age:',
        profile_goal: 'Goal:',
        profile_lang: 'Language:',
        about_title: 'About SKIPAPP',
        about_text: 'SKIPAPP is an educational app based on behavioral economics research. The app teaches financial literacy through tracking abstained expenses.',
        about_version: 'Version: 4.0 (Multilingual)',
        about_developer: 'Developed by: Dr. Eliran',
        about_method: 'Based on AST methodology',
        actions_title: 'Actions',
        btn_change_lang: 'ğŸŒ Change Language'
      }
    };
    
    // Initialize data
    let userData = null;
    let skipsData = [];
    let currentLang = 'he';
    let screenHistory = [];
    
    // Load from localStorage
    try {
      const storedUser = localStorage.getItem('skipapp_user');
      const storedData = localStorage.getItem('skipapp_data');
      const storedLang = localStorage.getItem('skipapp_lang');
      
      if (storedUser && storedUser !== 'null') {
        userData = JSON.parse(storedUser);
      }
      
      if (storedData && storedData !== '[]') {
        skipsData = JSON.parse(storedData);
      }
      
      if (storedLang) {
        currentLang = storedLang;
        setLanguage(currentLang, false);
      }
    } catch (error) {
      console.error('Error loading data:', error);
    }
    
    // Set language
    function setLanguage(lang, save = true) {
      currentLang = lang;
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
      document.body.className = lang;
      
      // Update all translatable elements
      document.querySelectorAll('[data-lang]').forEach(el => {
        const key = el.getAttribute('data-lang');
        if (translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
      
      // Update placeholders
      document.querySelectorAll('[data-lang-placeholder]').forEach(el => {
        const key = el.getAttribute('data-lang-placeholder');
        if (translations[lang][key]) {
          el.placeholder = translations[lang][key];
        }
      });
      
      // Update language buttons
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang-btn') === lang) {
          btn.classList.add('active');
        }
      });
      
      if (save) {
        localStorage.setItem('skipapp_lang', lang);
        if (userData) {
          userData.language = lang;
          localStorage.setItem('skipapp_user', JSON.stringify(userData));
        }
      }
      
      // Update profile language display
      const profileLangEl = document.getElementById('profileLang');
      if (profileLangEl) {
        profileLangEl.textContent = lang === 'he' ? '×¢×‘×¨×™×ª' : 'English';
      }
    }
    
    // Check registration
    function checkRegistration() {
      if (userData && userData.firstName) {
        showScreen('home');
        updateUserGreeting();
      } else {
        showScreen('register');
      }
    }
    
    // Save registration
    function saveRegistration(event) {
      event.preventDefault();
      
      try {
        const firstName = document.getElementById('firstName').value.trim();
        const age = document.getElementById('age').value;
        const goal = document.getElementById('goal').value.trim();
        
        if (!firstName || !age) {
          alert(currentLang === 'he' ? '× × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”×—×•×‘×”' : 'Please fill all required fields');
          return;
        }
        
        userData = {
          firstName: firstName,
          age: parseInt(age),
          goal: goal || (currentLang === 'he' ? '×œ×¢×ª×™×“ ×˜×•×‘ ×™×•×ª×¨' : 'For a better future'),
          language: currentLang,
          registeredAt: new Date().toISOString()
        };
        
        localStorage.setItem('skipapp_user', JSON.stringify(userData));
        
        showScreen('home');
        updateUserGreeting();
      } catch (error) {
        console.error('Error saving registration:', error);
        alert(currentLang === 'he' ? '×©×’×™××” ×‘×©××™×¨×ª ×”×¨×©××”. × ×¡×” ×©×•×‘.' : 'Error saving registration. Please try again.');
      }
    }
    
    // Update user greeting
    function updateUserGreeting() {
      if (userData && userData.firstName) {
        const userNameEl = document.getElementById('userName');
        const profileNameEl = document.getElementById('profileName');
        const profileAgeEl = document.getElementById('profileAge');
        const profileGoalEl = document.getElementById('profileGoal');
        
        if (userNameEl) userNameEl.textContent = userData.firstName;
        if (profileNameEl) profileNameEl.textContent = userData.firstName;
        if (profileAgeEl) profileAgeEl.textContent = userData.age;
        if (profileGoalEl) profileGoalEl.textContent = userData.goal;
      }
    }
    
    // Show screen
    function showScreen(screenId) {
      try {
        const screens = document.querySelectorAll('.screen');
        screens.forEach(s => s.classList.remove('active'));
        
        const targetScreen = document.getElementById(screenId);
        if (targetScreen) {
          targetScreen.classList.add('active');
          screenHistory.push(screenId);
          if (screenHistory.length > 10) screenHistory.shift();
        }
        
        if (screenId === 'historyTable') {
          loadHistoryTable();
        } else if (screenId === 'summary') {
          loadSummary();
        } else if (screenId === 'settings') {
          updateUserGreeting();
        }
      } catch (error) {
        console.error('Error showing screen:', error);
      }
    }
    
    // Go back
    function goBack() {
      if (screenHistory.length > 1) {
        screenHistory.pop();
        const prevScreen = screenHistory[screenHistory.length - 1];
        showScreen(prevScreen);
      } else {
        showScreen('home');
      }
    }
    
    // Add skip
    function addSkip(event) {
      event.preventDefault();
      
      try {
        const category = document.getElementById('category').value;
        const amount = parseFloat(document.getElementById('amount').value);
        const description = document.getElementById('description').value.trim();
        
        if (!category || !amount || amount <= 0) {
          alert(currentLang === 'he' ? '× × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”×—×•×‘×”' : 'Please fill all required fields');
          return;
        }
        
        const skip = {
          id: Date.now(),
          category: category,
          amount: amount,
          description: description,
          date: new Date().toISOString(),
          points: Math.round(amount * 0.5)
        };
        
        skipsData.unshift(skip);
        localStorage.setItem('skipapp_data', JSON.stringify(skipsData));
        
        const form = document.getElementById('skipForm');
        if (form) form.reset();
        
        showScreen('investmentChannels');
      } catch (error) {
        console.error('Error adding skip:', error);
        alert(currentLang === 'he' ? '×©×’×™××” ×‘×©××™×¨×ª ×”×“×™×œ×•×’. × ×¡×” ×©×•×‘.' : 'Error saving skip. Please try again.');
      }
    }
    
    // Load history table
    function loadHistoryTable() {
      try {
        const tbody = document.getElementById('historyTableBody');
        if (!tbody) return;
        
        if (skipsData.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="4">
                <div class="empty-state">
                  <div class="empty-icon">ğŸ“</div>
                  <div data-lang="no_skips">${translations[currentLang].no_skips}</div>
                </div>
              </td>
            </tr>
          `;
        } else {
          tbody.innerHTML = skipsData.map(skip => {
            const date = new Date(skip.date);
            const dateStr = date.toLocaleDateString(currentLang === 'he' ? 'he-IL' : 'en-US', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit'
            });
            
            return `
              <tr>
                <td>${dateStr}</td>
                <td>${skip.category || (currentLang === 'he' ? '××—×¨' : 'Other')}</td>
                <td>â‚ª${(skip.amount || 0).toLocaleString()}</td>
                <td>+${skip.points || 0}</td>
              </tr>
            `;
          }).join('');
        }
      } catch (error) {
        console.error('Error loading history table:', error);
      }
    }
    
    // Load summary
    function loadSummary() {
      try {
        const totalSkips = skipsData.length;
        const totalSavings = skipsData.reduce((sum, skip) => sum + (skip.amount || 0), 0);
        const totalPoints = skipsData.reduce((sum, skip) => sum + (skip.points || 0), 0);
        const avgSkip = totalSkips > 0 ? Math.round(totalSavings / totalSkips) : 0;
        
        const summaryTotalSkipsEl = document.getElementById('summaryTotalSkips');
        const summaryTotalSavingsEl = document.getElementById('summaryTotalSavings');
        const summaryTotalPointsEl = document.getElementById('summaryTotalPoints');
        const summaryAvgSkipEl = document.getElementById('summaryAvgSkip');
        
        if (summaryTotalSkipsEl) summaryTotalSkipsEl.textContent = totalSkips;
        if (summaryTotalSavingsEl) summaryTotalSavingsEl.textContent = `â‚ª${totalSavings.toLocaleString()}`;
        if (summaryTotalPointsEl) summaryTotalPointsEl.textContent = totalPoints.toLocaleString();
        if (summaryAvgSkipEl) summaryAvgSkipEl.textContent = `â‚ª${avgSkip.toLocaleString()}`;
      } catch (error) {
        console.error('Error loading summary:', error);
      }
    }
    
    // Change language
    function changeLanguage() {
      const newLang = currentLang === 'he' ? 'en' : 'he';
      setLanguage(newLang);
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      try {
        if (userData && userData.firstName) {
          updateUserGreeting();
        }
      } catch (error) {
        console.error('Error during initialization:', error);
      }
    });
  </script>
</body>
</html>
