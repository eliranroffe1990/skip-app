<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SKIPAPP v5.1</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700;800&family=Roboto:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#A8D5BA">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="SKIPAPP">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Assistant', sans-serif;
      background: linear-gradient(135deg, #FFFCF7 0%, #F8F4EF 100%);
      min-height: 100vh;
    }
    
    body[dir="ltr"] {
      font-family: 'Roboto', sans-serif;
    }
    
    .container {
      max-width: 428px;
      margin: 0 auto;
      background: white;
      min-height: 100vh;
      box-shadow: 0 0 40px rgba(0,0,0,0.1);
      position: relative;
    }
    
    .screen {
      display: none;
      padding: 20px;
      min-height: 100vh;
    }
    
    .screen.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Header */
    .header {
      background: linear-gradient(135deg, #A8D5BA 0%, #7EBA9B 100%);
      color: white;
      padding: 20px;
      border-radius: 0 0 20px 20px;
      margin: -20px -20px 20px -20px;
      position: relative;
    }
    
    .header h1 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 5px;
    }
    
    .header p {
      font-size: 14px;
      opacity: 0.9;
    }
    
    .back-button, .home-button {
      position: absolute;
      top: 20px;
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    
    [dir="rtl"] .back-button { left: 20px; }
    [dir="ltr"] .back-button { right: 20px; }
    [dir="rtl"] .home-button { right: 20px; }
    [dir="ltr"] .home-button { left: 20px; }
    
    .back-button:hover, .home-button:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.1);
    }
    
    /* Buttons */
    .btn {
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.3s;
      margin-top: 10px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #A8D5BA 0%, #7EBA9B 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(168, 213, 186, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(168, 213, 186, 0.4);
    }
    
    .btn-secondary {
      background: white;
      color: #7EBA9B;
      border: 2px solid #A8D5BA;
    }
    
    .btn-secondary:hover {
      background: rgba(168, 213, 186, 0.1);
    }
    
    /* Language Selection Screen */
    .language-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      text-align: center;
      padding: 40px 20px;
    }
    
    .logo-large {
      width: 150px;
      height: 150px;
      background: linear-gradient(135deg, #A8D5BA 0%, #7EBA9B 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(168, 213, 186, 0.3);
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .logo-large .check {
      font-size: 80px;
      color: white;
    }
    
    .app-title {
      font-size: 48px;
      font-weight: 900;
      color: #3D3D3D;
      margin-bottom: 15px;
    }
    
    .app-subtitle {
      font-size: 18px;
      color: #757575;
      margin-bottom: 40px;
    }
    
    .lang-selector {
      display: flex;
      gap: 15px;
      width: 100%;
      max-width: 400px;
    }
    
    .lang-option {
      flex: 1;
      padding: 30px 20px;
      border: 3px solid #E8E8E8;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s;
      background: white;
    }
    
    .lang-option:hover {
      border-color: #A8D5BA;
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(168, 213, 186, 0.2);
    }
    
    .lang-flag {
      font-size: 48px;
      margin-bottom: 10px;
    }
    
    .lang-name {
      font-size: 20px;
      font-weight: 700;
      color: #3D3D3D;
    }
    
    /* Intro & Terms Screen */
    .intro-content {
      max-width: 100%;
    }
    
    .intro-box {
      background: #F8F4EF;
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 20px;
    }
    
    .intro-box h3 {
      font-size: 20px;
      font-weight: 700;
      color: #3D3D3D;
      margin-bottom: 15px;
    }
    
    .intro-box p {
      font-size: 16px;
      color: #757575;
      line-height: 1.6;
      margin-bottom: 10px;
    }
    
    .intro-box ul {
      margin: 10px 0;
      padding-inline-start: 20px;
    }
    
    .intro-box li {
      font-size: 15px;
      color: #757575;
      line-height: 1.8;
      margin-bottom: 8px;
    }
    
    .terms-box {
      background: #FFFCF7;
      border: 2px solid #FFD9A0;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .terms-box h4 {
      font-size: 18px;
      font-weight: 700;
      color: #3D3D3D;
      margin-bottom: 12px;
    }
    
    .terms-box p {
      font-size: 14px;
      color: #757575;
      line-height: 1.6;
      margin-bottom: 10px;
    }
    
    .accept-checkbox {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px;
      background: white;
      border-radius: 12px;
      margin-bottom: 15px;
      cursor: pointer;
    }
    
    .accept-checkbox input[type="checkbox"] {
      width: 24px;
      height: 24px;
      cursor: pointer;
    }
    
    .accept-checkbox label {
      font-size: 15px;
      color: #3D3D3D;
      cursor: pointer;
      flex: 1;
    }
    
    /* Form Elements */
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #3D3D3D;
      font-size: 16px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 15px;
      border: 2px solid #E8E8E8;
      border-radius: 12px;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.3s;
      background: white;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #A8D5BA;
      box-shadow: 0 0 0 3px rgba(168, 213, 186, 0.1);
    }
    
    /* Gender Options */
    .gender-options {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .gender-option {
      flex: 1;
      position: relative;
    }
    
    .gender-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .gender-label {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px 10px;
      border: 2px solid #E8E8E8;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      background: white;
      min-height: 100px;
    }
    
    .gender-label .emoji {
      font-size: 32px;
      margin-bottom: 8px;
    }
    
    .gender-label .text {
      font-size: 14px;
      font-weight: 600;
      color: #757575;
    }
    
    .gender-option input[type="radio"]:checked + .gender-label {
      border-color: #A8D5BA;
      background: rgba(168, 213, 186, 0.1);
    }
    
    .gender-option input[type="radio"]:checked + .gender-label .text {
      color: #7EBA9B;
    }
    
    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #A8D5BA 0%, #7EBA9B 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 14px;
      opacity: 0.9;
    }
    
    /* Cards */
    .card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      border: 1px solid #F0F0F0;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .card-title {
      font-size: 18px;
      font-weight: 700;
      color: #3D3D3D;
    }
    
    /* History Table */
    .history-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 10px;
      margin-bottom: 20px;
    }
    
    .history-table th {
      background: linear-gradient(135deg, #A8D5BA 0%, #7EBA9B 100%);
      color: white;
      padding: 15px 10px;
      font-size: 14px;
      font-weight: 700;
      text-align: center;
    }
    
    .history-table th:first-child {
      border-radius: 12px 0 0 12px;
    }
    
    .history-table th:last-child {
      border-radius: 0 12px 12px 0;
    }
    
    .history-table td {
      background: white;
      padding: 15px 10px;
      font-size: 14px;
      text-align: center;
      border-top: 1px solid #F0F0F0;
      border-bottom: 1px solid #F0F0F0;
    }
    
    .history-table tr {
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    .history-table td:first-child {
      border-inline-start: 1px solid #F0F0F0;
      border-radius: 12px 0 0 12px;
    }
    
    .history-table td:last-child {
      border-inline-end: 1px solid #F0F0F0;
      border-radius: 0 12px 12px 0;
    }
    
    .skip-amount {
      color: #7EBA9B;
      font-weight: 700;
    }
    
    .purchase-amount {
      color: #FF6B6B;
      font-weight: 700;
    }
    
    .date-cell {
      color: #757575;
      font-size: 13px;
    }
    
    .category-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      background: #F0F0F0;
      color: #757575;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #757575;
    }
    
    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 15px;
      opacity: 0.5;
    }
    
    .empty-state-text {
      font-size: 16px;
      line-height: 1.6;
    }
    
    /* Comparison Card */
    .comparison-card {
      background: linear-gradient(135deg, #FFD9A0 0%, #FFB88C 100%);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      color: white;
    }
    
    .comparison-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 15px;
    }
    
    .comparison-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 16px;
    }
    
    .comparison-value {
      font-weight: 700;
      font-size: 20px;
    }
    
    .comparison-footer {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.3);
      font-size: 15px;
      text-align: center;
    }
    
    /* Analytics Badge */
    .analytics-badge {
      position: fixed;
      bottom: 20px;
      background: #4CAF50;
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      box-shadow: 0 2px 10px rgba(76, 175, 80, 0.3);
      z-index: 1000;
      animation: pulse 2s infinite;
    }
    
    [dir="rtl"] .analytics-badge { left: 20px; }
    [dir="ltr"] .analytics-badge { right: 20px; }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    /* Responsive */
    @media (max-width: 428px) {
      .container {
        max-width: 100%;
      }
      
      .lang-selector {
        flex-direction: column;
      }
      
      .history-table {
        font-size: 12px;
      }
      
      .history-table th,
      .history-table td {
        padding: 10px 5px;
      }
    }
  </style>
</head>
<body dir="rtl">
  <div class="container">
    <!-- Analytics Badge -->
    <div class="analytics-badge" id="analyticsBadge">ğŸ“Š Analytics</div>
    
    <!-- Screen 1: Language Selection -->
    <div class="screen active" id="languageScreen">
      <div class="language-screen">
        <div class="logo-large">
          <div class="check">âœ“</div>
        </div>
        <h1 class="app-title">SKIPAPP</h1>
        <p class="app-subtitle">Skip the Expense, Save for the Future<br>×“×œ×’ ×¢×œ ×”×”×•×¦××”, ×¦×‘×•×¨ ×œ×¢×ª×™×“</p>
        
        <div class="lang-selector">
          <div class="lang-option" onclick="app.selectLanguage('he')">
            <div class="lang-flag">ğŸ‡®ğŸ‡±</div>
            <div class="lang-name">×¢×‘×¨×™×ª</div>
          </div>
          <div class="lang-option" onclick="app.selectLanguage('en')">
            <div class="lang-flag">ğŸ‡¬ğŸ‡§</div>
            <div class="lang-name">English</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Screen 2: Intro & Terms -->
    <div class="screen" id="introScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <h1 id="introTitle">××•×“×•×ª ×”××¤×œ×™×§×¦×™×”</h1>
        <p id="introSubtitle">×œ××” SKIPAPP?</p>
      </div>
      
      <div class="intro-content">
        <div class="intro-box">
          <h3 id="whatIsTitle">××” ×–×” SKIPAPP?</h3>
          <p id="whatIsText">SKIPAPP ×¢×•×–×¨×ª ×œ×š ×œ×¢×§×•×‘ ××—×¨×™ ×”×“×™×œ×•×’×™× ×©×œ×š - ×”×¡×›×•××™× ×”×§×˜× ×™× ×©×“×™×œ×’×ª ×¢×œ×™×”× ×‘××”×œ×š ×”×™×•×. ×›×œ ×§×¤×”, ×—×˜×™×£, ××• ×§× ×™×™×” ××™×•×ª×¨×ª ×©×œ× ×§× ×™×ª - ×–×” ×›×¡×£ ×©×—×¡×›×ª!</p>
          
          <h3 id="howWorksTitle" style="margin-top: 20px;">××™×š ×–×” ×¢×•×‘×“?</h3>
          <ul id="howWorksList">
            <li>×ª×¢×“ ×›×œ ×“×™×œ×•×’ (×§×¤×”, ××¨×•×—×”, ×§× ×™×™×”)</li>
            <li>×¦×‘×•×¨ × ×§×•×“×•×ª (50% ××”×¡×›×•×)</li>
            <li>×œ××“ ×¢×œ ×”×©×§×¢×•×ª ×—×›××•×ª</li>
            <li>×¨××” ×›××” ×—×¡×›×ª ×¢×“ ×¢×›×©×™×•!</li>
          </ul>
        </div>
        
        <div class="terms-box">
          <h4 id="termsTitle">×ª× ××™ ×©×™××•×©</h4>
          <div id="termsContent">
            <p><strong>1. ×©×™××•×© ×‘××¤×œ×™×§×¦×™×”:</strong> ×”××¤×œ×™×§×¦×™×” ××™×•×¢×“×ª ×œ××¢×§×‘ ××—×¨×™ ×”×¨×’×œ×™ ×—×™×¡×›×•×Ÿ ××™×©×™×™× ×‘×œ×‘×“.</p>
            <p><strong>2. ×¤×¨×˜×™×•×ª:</strong> ×”× ×ª×•× ×™× ×©×œ×š × ×©××¨×™× ×‘××›×©×™×¨ ×©×œ×š ×•×‘×¢× ×Ÿ Firebase. ×× ×—× ×• ×œ× ××©×ª×¤×™× ××™×“×¢ ××™×©×™ ×¢× ×¦×“×“×™× ×©×œ×™×©×™×™×.</p>
            <p><strong>3. ××—×¨×™×•×ª:</strong> ×”××¤×œ×™×§×¦×™×” ××¡×¤×§×ª ×›×œ×™× ×œ×¢×§×•×‘ ××—×¨×™ ×—×™×¡×›×•×Ÿ, ××š ××™× ×” ××”×•×•×” ×™×™×¢×•×¥ ×¤×™× × ×¡×™ ××§×¦×•×¢×™.</p>
            <p><strong>4. ××—×§×¨:</strong> ×”××¤×œ×™×§×¦×™×” ×”×™× ×—×œ×§ ×××—×§×¨ ××§×“××™ ×¢×œ ×”×ª× ×”×’×•×ª ×¤×™× × ×¡×™×ª. ×”× ×ª×•× ×™× ××©××©×™× ×œ××—×§×¨ ×‘×œ×‘×“.</p>
            <p><strong>5. ×©×™× ×•×™×™×:</strong> ×× ×—× ×• ×©×•××¨×™× ××ª ×”×–×›×•×ª ×œ×¢×“×›×Ÿ ××ª ×”×ª× ××™×. ×©×™××•×© ×××©×™×š ××”×•×•×” ×”×¡×›××” ×œ×ª× ××™× ×”××¢×•×“×›× ×™×.</p>
          </div>
        </div>
        
        <div class="accept-checkbox">
          <input type="checkbox" id="acceptTerms">
          <label for="acceptTerms" id="acceptLabel">×× ×™ ××¡×›×™×/×” ×œ×ª× ××™ ×”×©×™××•×© ×•××‘×™×Ÿ/×” ×©×”× ×ª×•× ×™× ×™×©××©×• ×œ××—×§×¨ ××§×“××™</label>
        </div>
        
        <button class="btn btn-primary" id="continueBtn" onclick="app.continueToRegister()" disabled>
          <span id="continueBtnText">×”××©×š ×œ×”×¨×©××” â†’</span>
        </button>
      </div>
    </div>
    
    <!-- Screen 3: Register -->
    <div class="screen" id="registerScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <h1 id="registerTitle">×”×¨×©××”</h1>
        <p id="registerSubtitle">×‘×•××• × ×›×™×¨!</p>
      </div>
      
      <form onsubmit="app.register(event)">
        <div class="form-group">
          <label id="nameLabel">××™×š ×§×•×¨××™× ×œ×š?</label>
          <input type="text" id="userName" required>
        </div>
        
        <div class="form-group">
          <label id="ageLabel">×›××” ××ª×” ×‘×Ÿ/×‘×ª?</label>
          <input type="number" id="userAge" min="13" max="120" required>
        </div>
        
        <div class="form-group">
          <label id="genderLabel">××’×“×¨</label>
          <div class="gender-options">
            <div class="gender-option">
              <input type="radio" id="genderMale" name="gender" value="male" required>
              <label for="genderMale" class="gender-label">
                <span class="emoji">ğŸ‘¨</span>
                <span class="text" id="maleTxt">×–×›×¨</span>
              </label>
            </div>
            <div class="gender-option">
              <input type="radio" id="genderFemale" name="gender" value="female">
              <label for="genderFemale" class="gender-label">
                <span class="emoji">ğŸ‘©</span>
                <span class="text" id="femaleTxt">× ×§×‘×”</span>
              </label>
            </div>
            <div class="gender-option">
              <input type="radio" id="genderOther" name="gender" value="other">
              <label for="genderOther" class="gender-label">
                <span class="emoji">ğŸ§‘</span>
                <span class="text" id="otherTxt">××—×¨</span>
              </label>
            </div>
          </div>
        </div>
        
        <button type="submit" class="btn btn-primary">
          <span id="registerBtn">×©××•×¨ ×•×”××©×š â†’</span>
        </button>
      </form>
    </div>
    
    <!-- Screen 4: Welcome (First time after registration) -->
    <div class="screen" id="welcomeScreen">
      <div class="header">
        <h1 id="welcomeTitle">×‘×¨×•×š ×”×‘×!</h1>
        <p id="welcomeSubtitle">××ª×” ××•×›×Ÿ ×œ×”×ª×—×™×œ ×œ×—×¡×•×š</p>
      </div>
      
      <div style="text-align: center; margin: 60px 0;">
        <div class="logo-large" style="margin: 0 auto 30px;">
          <div class="check">âœ“</div>
        </div>
        <h2 id="welcomeMsg" style="font-size: 24px; margin-bottom: 15px; color: #3D3D3D;">××¢×•×œ×”! ×”×¦×œ×—×ª ×œ×”×™×¨×©×</h2>
        <p id="welcomeDesc" style="color: #757575; font-size: 16px; margin-bottom: 40px; line-height: 1.6;">
          ×¢×›×©×™×• ××ª×” ×™×›×•×œ ×œ×”×ª×—×™×œ ×œ×ª×¢×“ ×“×™×œ×•×’×™×,<br>
          ×œ×¦×‘×•×¨ × ×§×•×“×•×ª, ×•×œ×œ××•×“ ×¢×œ ×”×©×§×¢×•×ª ×—×›××•×ª!
        </p>
      </div>
      
      <button class="btn btn-primary" onclick="app.showScreen('homeScreen')">
        <span id="startBtn">×‘×•××• × ×ª×—×™×œ! ğŸš€</span>
      </button>
    </div>
    
    <!-- Screen 5: Home Dashboard -->
    <div class="screen" id="homeScreen">
      <div class="header">
        <h1 id="homeTitle">×©×œ×•×, ××©×ª××©!</h1>
        <p id="homeSubtitle">×”××¡×¢ ×©×œ×š ×œ×—×™×¡×›×•×Ÿ ×—×›×</p>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalSkips">0</div>
          <div class="stat-label" id="skipsLabel">×“×™×œ×•×’×™×</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalSavings">â‚ª0</div>
          <div class="stat-label" id="savingsLabel">×—×¡×›×•×Ÿ</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalPoints">0</div>
          <div class="stat-label" id="pointsLabel">× ×§×•×“×•×ª</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalPurchases">0</div>
          <div class="stat-label" id="purchasesLabel">×§× ×™×•×ª</div>
        </div>
      </div>
      
      <h3 id="actionsTitle" style="margin: 20px 0 15px; font-size: 18px; color: #3D3D3D;">×¤×¢×•×œ×•×ª ××”×™×¨×•×ª</h3>
      
      <button class="btn btn-primary" onclick="app.showScreen('addSkipScreen')">
        <span id="addSkipBtn">ğŸ’¸ ×ª×¢×“ ×“×™×œ×•×’</span>
      </button>
      
      <button class="btn btn-secondary" onclick="app.showScreen('addPurchaseScreen')">
        <span id="addPurchaseBtn">ğŸ›’ ×ª×¢×“ ×§× ×™×™×”</span>
      </button>
      
      <button class="btn btn-secondary" onclick="app.showScreen('investmentScreen')">
        <span id="learnBtn">ğŸ’¡ ×œ××“ ×œ×”×©×§×™×¢</span>
      </button>
      
      <button class="btn btn-secondary" onclick="app.showScreen('historyScreen')">
        <span id="historyBtn">ğŸ“Š ×”×™×¡×˜×•×¨×™×” ×•××¢×§×‘</span>
      </button>
    </div>
    
    <!-- Screen 6: Add Skip -->
    <div class="screen" id="addSkipScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <button class="home-button" onclick="app.goHome()">ğŸ </button>
        <h1 id="skipTitle">×ª×¢×“ ×“×™×œ×•×’</h1>
        <p id="skipSubtitle">×¢×œ ××” ×“×™×œ×’×ª?</p>
      </div>
      
      <form onsubmit="app.addSkip(event)">
        <div class="form-group">
          <label id="skipItemLabel">×¢×œ ××” ×“×™×œ×’×ª?</label>
          <input type="text" id="skipItem" required>
        </div>
        
        <div class="form-group">
          <label id="skipAmountLabel">×›××” ×–×” ×”×™×” ×¢×•×œ×”?</label>
          <input type="number" id="skipAmount" min="0.01" step="0.01" required>
        </div>
        
        <div class="form-group">
          <label id="skipCategoryLabel">×§×˜×’×•×¨×™×”</label>
          <select id="skipCategory" required>
            <option value="">×‘×—×¨ ×§×˜×’×•×¨×™×”</option>
            <option value="food" id="catFood">××•×›×œ ×•×©×ª×™×™×”</option>
            <option value="clothes" id="catClothes">×‘×’×“×™×</option>
            <option value="entertainment" id="catEntertainment">×‘×™×œ×•×™×™×</option>
            <option value="transport" id="catTransport">×ª×—×‘×•×¨×”</option>
            <option value="tech" id="catTech">×˜×›× ×•×œ×•×’×™×”</option>
            <option value="other" id="catOther">××—×¨</option>
          </select>
        </div>
        
        <div class="form-group">
          <label id="skipNotesLabel">×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)</label>
          <textarea id="skipNotes" rows="3"></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary">
          <span id="saveSkipBtn">×©××•×¨ ×“×™×œ×•×’ âœ“</span>
        </button>
      </form>
    </div>
    
    <!-- Screen 7: Add Purchase -->
    <div class="screen" id="addPurchaseScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <button class="home-button" onclick="app.goHome()">ğŸ </button>
        <h1 id="purchaseTitle">×ª×¢×“ ×§× ×™×™×”</h1>
        <p id="purchaseSubtitle">××” ×§× ×™×ª?</p>
      </div>
      
      <form onsubmit="app.addPurchase(event)">
        <div class="form-group">
          <label id="purchaseItemLabel">××” ×§× ×™×ª?</label>
          <input type="text" id="purchaseItem" required>
        </div>
        
        <div class="form-group">
          <label id="purchaseAmountLabel">×›××” ×©×™×œ××ª?</label>
          <input type="number" id="purchaseAmount" min="0.01" step="0.01" required>
        </div>
        
        <div class="form-group">
          <label id="purchaseCategoryLabel">×§×˜×’×•×¨×™×”</label>
          <select id="purchaseCategory" required>
            <option value="">×‘×—×¨ ×§×˜×’×•×¨×™×”</option>
            <option value="food">××•×›×œ ×•×©×ª×™×™×”</option>
            <option value="clothes">×‘×’×“×™×</option>
            <option value="entertainment">×‘×™×œ×•×™×™×</option>
            <option value="transport">×ª×—×‘×•×¨×”</option>
            <option value="tech">×˜×›× ×•×œ×•×’×™×”</option>
            <option value="other">××—×¨</option>
          </select>
        </div>
        
        <div class="form-group">
          <label id="purchaseTimeLabel">×‘××™×–×• ×©×¢×”?</label>
          <input type="time" id="purchaseTime">
        </div>
        
        <div class="form-group">
          <label id="purchaseNotesLabel">×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)</label>
          <textarea id="purchaseNotes" rows="3"></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary">
          <span id="savePurchaseBtn">×©××•×¨ ×§× ×™×™×” ğŸ›’</span>
        </button>
      </form>
    </div>
    
    <!-- Screen 8: Investment Education -->
    <div class="screen" id="investmentScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <button class="home-button" onclick="app.goHome()">ğŸ </button>
        <h1 id="investTitle">×œ××“ ×œ×”×©×§×™×¢</h1>
        <p id="investSubtitle">×—×™× ×•×š ×¤×™× × ×¡×™</p>
      </div>
      
      <h3 id="investResourcesTitle" style="margin-bottom: 15px; font-size: 18px; color: #3D3D3D;">××§×•×¨×•×ª ××•××œ×¦×™×</h3>
      
      <div class="card" onclick="app.openLink('https://www.investopedia.com/terms/c/compoundinterest.asp')">
        <div class="card-header">
          <div class="card-title" id="link1">ğŸ“ˆ ×¨×™×‘×™×ª ×“×¨×™×‘×™×ª</div>
          <div style="font-size: 24px;">â†’</div>
        </div>
      </div>
      
      <div class="card" onclick="app.openLink('https://www.investopedia.com/articles/personal-finance/040315/why-save-retirement-your-20s.asp')">
        <div class="card-header">
          <div class="card-title" id="link2">ğŸŒ± ×—×™×¡×›×•×Ÿ ××¦×¢×™×¨</div>
          <div style="font-size: 24px;">â†’</div>
        </div>
      </div>
      
      <div class="card" onclick="app.openLink('https://www.investopedia.com/investing/invest-101-what-are-stocks/')">
        <div class="card-header">
          <div class="card-title" id="link3">ğŸ“Š ××”×™ ×× ×™×”?</div>
          <div style="font-size: 24px;">â†’</div>
        </div>
      </div>
      
      <div class="card" onclick="app.openLink('https://www.investopedia.com/terms/b/bond.asp')">
        <div class="card-header">
          <div class="card-title" id="link4">ğŸ’¼ ××”×• ××’×´×—?</div>
          <div style="font-size: 24px;">â†’</div>
        </div>
      </div>
      
      <div class="card" onclick="app.openLink('https://www.investopedia.com/investing/diversification-importance-investing/')">
        <div class="card-header">
          <div class="card-title" id="link5">ğŸ¯ ×¤×™×–×•×¨ ×¡×™×›×•× ×™×</div>
          <div style="font-size: 24px;">â†’</div>
        </div>
      </div>
    </div>
    
    <!-- Screen 9: History -->
    <div class="screen" id="historyScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <button class="home-button" onclick="app.goHome()">ğŸ </button>
        <h1 id="historyTitle">×”×™×¡×˜×•×¨×™×”</h1>
        <p id="historySubtitle">×”××¡×¢ ×©×œ×š</p>
      </div>
      
      <div class="comparison-card">
        <div class="comparison-title" id="todayTitle">ğŸ“… ×”×™×•×</div>
        <div class="comparison-row">
          <span id="todaySkipsLabel">×“×™×œ×’×ª×™ ×¢×œ:</span>
          <span class="comparison-value" id="todaySkips">â‚ª0</span>
        </div>
        <div class="comparison-row">
          <span id="todayPurchasesLabel">×§× ×™×ª×™ ×‘×¤×•×¢×œ:</span>
          <span class="comparison-value" id="todayPurchases">â‚ª0</span>
        </div>
        <div class="comparison-footer" id="todayComparison">××—×›×” ×œ× ×ª×•× ×™×...</div>
      </div>
      
      <h3 id="historyTableTitle" style="margin-bottom: 15px; font-size: 18px; color: #3D3D3D;">×˜×‘×œ×ª ×”×©×•×•××” ××¤×•×¨×˜×ª</h3>
      
      <div style="overflow-x: auto;">
        <table class="history-table" id="historyTable">
          <thead>
            <tr>
              <th id="thDate">×ª××¨×™×š</th>
              <th id="thSkip">×“×™×œ×•×’</th>
              <th id="thPurchase">×§× ×™×™×”</th>
              <th id="thCategory">×§×˜×’×•×¨×™×”</th>
            </tr>
          </thead>
          <tbody id="historyTableBody">
            <tr>
              <td colspan="4">
                <div class="empty-state">
                  <div class="empty-state-icon">ğŸ“­</div>
                  <div class="empty-state-text" id="emptyHistory">×˜×¨× ×ª×™×¢×“×ª ×“×™×œ×•×’×™× ××• ×§× ×™×•×ª</div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <button class="btn btn-primary" onclick="app.showScreen('summaryScreen')">
        <span id="viewSummaryBtn">ğŸ“Š ×¡×™×›×•× ××œ×</span>
      </button>
    </div>
    
    <!-- Screen 10: Summary -->
    <div class="screen" id="summaryScreen">
      <div class="header">
        <button class="back-button" onclick="app.goBack()">â†</button>
        <button class="home-button" onclick="app.goHome()">ğŸ </button>
        <h1 id="summaryTitle">×¡×™×›×•×</h1>
        <p id="summarySubtitle">×”× ×ª×•× ×™× ×©×œ×š</p>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="summarySkips">0</div>
          <div class="stat-label" id="summarySkipsLabel">×“×™×œ×•×’×™×</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="summarySavings">â‚ª0</div>
          <div class="stat-label" id="summarySavingsLabel">×—×¡×›×•×Ÿ</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="summaryPoints">0</div>
          <div class="stat-label" id="summaryPointsLabel">× ×§×•×“×•×ª</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="summaryPurchasesCount">0</div>
          <div class="stat-label" id="summaryPurchasesLabel">×§× ×™×•×ª</div>
        </div>
      </div>
      
      <div class="comparison-card">
        <div class="comparison-title" id="analysisTitle">ğŸ¯ × ×™×ª×•×— ×”×ª× ×”×’×•×ª×™</div>
        <div id="behaviorAnalysis" style="font-size: 16px; line-height: 1.8;">
          <span id="analysisText">××—×›×” ×œ× ×ª×•× ×™×...</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Translations
    const translations = {
      he: {
        // Language Screen
        appTitle: 'SKIPAPP',
        appSubtitle: '×“×œ×’ ×¢×œ ×”×”×•×¦××”, ×¦×‘×•×¨ ×œ×¢×ª×™×“',
        
        // Intro Screen
        introTitle: '××•×“×•×ª ×”××¤×œ×™×§×¦×™×”',
        introSubtitle: '×œ××” SKIPAPP?',
        whatIsTitle: '××” ×–×” SKIPAPP?',
        whatIsText: 'SKIPAPP ×¢×•×–×¨×ª ×œ×š ×œ×¢×§×•×‘ ××—×¨×™ ×”×“×™×œ×•×’×™× ×©×œ×š - ×”×¡×›×•××™× ×”×§×˜× ×™× ×©×“×™×œ×’×ª ×¢×œ×™×”× ×‘××”×œ×š ×”×™×•×. ×›×œ ×§×¤×”, ×—×˜×™×£, ××• ×§× ×™×™×” ××™×•×ª×¨×ª ×©×œ× ×§× ×™×ª - ×–×” ×›×¡×£ ×©×—×¡×›×ª!',
        howWorksTitle: '××™×š ×–×” ×¢×•×‘×“?',
        howWorksItems: [
          '×ª×¢×“ ×›×œ ×“×™×œ×•×’ (×§×¤×”, ××¨×•×—×”, ×§× ×™×™×”)',
          '×¦×‘×•×¨ × ×§×•×“×•×ª (50% ××”×¡×›×•×)',
          '×œ××“ ×¢×œ ×”×©×§×¢×•×ª ×—×›××•×ª',
          '×¨××” ×›××” ×—×¡×›×ª ×¢×“ ×¢×›×©×™×•!'
        ],
        termsTitle: '×ª× ××™ ×©×™××•×©',
        acceptLabel: '×× ×™ ××¡×›×™×/×” ×œ×ª× ××™ ×”×©×™××•×© ×•××‘×™×Ÿ/×” ×©×”× ×ª×•× ×™× ×™×©××©×• ×œ××—×§×¨ ××§×“××™',
        continueBtnText: '×”××©×š ×œ×”×¨×©××” â†’',
        
        // Register Screen
        registerTitle: '×”×¨×©××”',
        registerSubtitle: '×‘×•××• × ×›×™×¨!',
        nameLabel: '××™×š ×§×•×¨××™× ×œ×š?',
        ageLabel: '×›××” ××ª×” ×‘×Ÿ/×‘×ª?',
        genderLabel: '××’×“×¨',
        maleTxt: '×–×›×¨',
        femaleTxt: '× ×§×‘×”',
        otherTxt: '××—×¨',
        registerBtn: '×©××•×¨ ×•×”××©×š â†’',
        
        // Welcome Screen
        welcomeTitle: '×‘×¨×•×š ×”×‘×!',
        welcomeSubtitle: '××ª×” ××•×›×Ÿ ×œ×”×ª×—×™×œ ×œ×—×¡×•×š',
        welcomeMsg: '××¢×•×œ×”! ×”×¦×œ×—×ª ×œ×”×™×¨×©×',
        welcomeDesc: '×¢×›×©×™×• ××ª×” ×™×›×•×œ ×œ×”×ª×—×™×œ ×œ×ª×¢×“ ×“×™×œ×•×’×™×,\n×œ×¦×‘×•×¨ × ×§×•×“×•×ª, ×•×œ×œ××•×“ ×¢×œ ×”×©×§×¢×•×ª ×—×›××•×ª!',
        startBtn: '×‘×•××• × ×ª×—×™×œ! ğŸš€',
        
        // Home Screen
        homeTitle: '×©×œ×•×, {name}!',
        homeSubtitle: '×”××¡×¢ ×©×œ×š ×œ×—×™×¡×›×•×Ÿ ×—×›×',
        skipsLabel: '×“×™×œ×•×’×™×',
        savingsLabel: '×—×¡×›×•×Ÿ',
        pointsLabel: '× ×§×•×“×•×ª',
        purchasesLabel: '×§× ×™×•×ª',
        actionsTitle: '×¤×¢×•×œ×•×ª ××”×™×¨×•×ª',
        addSkipBtn: 'ğŸ’¸ ×ª×¢×“ ×“×™×œ×•×’',
        addPurchaseBtn: 'ğŸ›’ ×ª×¢×“ ×§× ×™×™×”',
        learnBtn: 'ğŸ’¡ ×œ××“ ×œ×”×©×§×™×¢',
        historyBtn: 'ğŸ“Š ×”×™×¡×˜×•×¨×™×” ×•××¢×§×‘',
        
        // Add Skip Screen
        skipTitle: '×ª×¢×“ ×“×™×œ×•×’',
        skipSubtitle: '×¢×œ ××” ×“×™×œ×’×ª?',
        skipItemLabel: '×¢×œ ××” ×“×™×œ×’×ª?',
        skipAmountLabel: '×›××” ×–×” ×”×™×” ×¢×•×œ×”?',
        skipCategoryLabel: '×§×˜×’×•×¨×™×”',
        skipNotesLabel: '×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)',
        saveSkipBtn: '×©××•×¨ ×“×™×œ×•×’ âœ“',
        
        // Add Purchase Screen
        purchaseTitle: '×ª×¢×“ ×§× ×™×™×”',
        purchaseSubtitle: '××” ×§× ×™×ª?',
        purchaseItemLabel: '××” ×§× ×™×ª?',
        purchaseAmountLabel: '×›××” ×©×™×œ××ª?',
        purchaseCategoryLabel: '×§×˜×’×•×¨×™×”',
        purchaseTimeLabel: '×‘××™×–×• ×©×¢×”?',
        purchaseNotesLabel: '×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)',
        savePurchaseBtn: '×©××•×¨ ×§× ×™×™×” ğŸ›’',
        
        // Categories
        catFood: '××•×›×œ ×•×©×ª×™×™×”',
        catClothes: '×‘×’×“×™×',
        catEntertainment: '×‘×™×œ×•×™×™×',
        catTransport: '×ª×—×‘×•×¨×”',
        catTech: '×˜×›× ×•×œ×•×’×™×”',
        catOther: '××—×¨',
        
        // Investment Screen
        investTitle: '×œ××“ ×œ×”×©×§×™×¢',
        investSubtitle: '×—×™× ×•×š ×¤×™× × ×¡×™',
        investResourcesTitle: '××§×•×¨×•×ª ××•××œ×¦×™×',
        link1: 'ğŸ“ˆ ×¨×™×‘×™×ª ×“×¨×™×‘×™×ª',
        link2: 'ğŸŒ± ×—×™×¡×›×•×Ÿ ××¦×¢×™×¨',
        link3: 'ğŸ“Š ××”×™ ×× ×™×”?',
        link4: 'ğŸ’¼ ××”×• ××’×´×—?',
        link5: 'ğŸ¯ ×¤×™×–×•×¨ ×¡×™×›×•× ×™×',
        
        // History Screen
        historyTitle: '×”×™×¡×˜×•×¨×™×”',
        historySubtitle: '×”××¡×¢ ×©×œ×š',
        todayTitle: 'ğŸ“… ×”×™×•×',
        todaySkipsLabel: '×“×™×œ×’×ª×™ ×¢×œ:',
        todayPurchasesLabel: '×§× ×™×ª×™ ×‘×¤×•×¢×œ:',
        historyTableTitle: '×˜×‘×œ×ª ×”×©×•×•××” ××¤×•×¨×˜×ª',
        thDate: '×ª××¨×™×š',
        thSkip: '×“×™×œ×•×’',
        thPurchase: '×§× ×™×™×”',
        thCategory: '×§×˜×’×•×¨×™×”',
        emptyHistory: '×˜×¨× ×ª×™×¢×“×ª ×“×™×œ×•×’×™× ××• ×§× ×™×•×ª',
        viewSummaryBtn: 'ğŸ“Š ×¡×™×›×•× ××œ×',
        
        // Summary Screen
        summaryTitle: '×¡×™×›×•×',
        summarySubtitle: '×”× ×ª×•× ×™× ×©×œ×š',
        summarySkipsLabel: '×“×™×œ×•×’×™×',
        summarySavingsLabel: '×—×¡×›×•×Ÿ',
        summaryPointsLabel: '× ×§×•×“×•×ª',
        summaryPurchasesLabel: '×§× ×™×•×ª',
        analysisTitle: 'ğŸ¯ × ×™×ª×•×— ×”×ª× ×”×’×•×ª×™',
        analysisText: '××—×›×” ×œ× ×ª×•× ×™×...'
      },
      en: {
        // Language Screen
        appTitle: 'SKIPAPP',
        appSubtitle: 'Skip the Expense, Save for the Future',
        
        // Intro Screen
        introTitle: 'About the App',
        introSubtitle: 'Why SKIPAPP?',
        whatIsTitle: 'What is SKIPAPP?',
        whatIsText: 'SKIPAPP helps you track your skips - the small amounts you chose not to spend during the day. Every coffee, snack, or unnecessary purchase you didn\'t buy - that\'s money you saved!',
        howWorksTitle: 'How does it work?',
        howWorksItems: [
          'Record every skip (coffee, meal, purchase)',
          'Earn points (50% of the amount)',
          'Learn about smart investments',
          'See how much you\'ve saved so far!'
        ],
        termsTitle: 'Terms of Use',
        acceptLabel: 'I agree to the terms of use and understand that the data will be used for academic research',
        continueBtnText: 'Continue to Registration â†’',
        
        // Register Screen
        registerTitle: 'Registration',
        registerSubtitle: 'Let\'s get to know you!',
        nameLabel: 'What\'s your name?',
        ageLabel: 'How old are you?',
        genderLabel: 'Gender',
        maleTxt: 'Male',
        femaleTxt: 'Female',
        otherTxt: 'Other',
        registerBtn: 'Save & Continue â†’',
        
        // Welcome Screen
        welcomeTitle: 'Welcome!',
        welcomeSubtitle: 'You\'re ready to start saving',
        welcomeMsg: 'Great! Registration complete',
        welcomeDesc: 'Now you can start tracking skips,\nearn points, and learn about smart investments!',
        startBtn: 'Let\'s Start! ğŸš€',
        
        // Home Screen
        homeTitle: 'Hello, {name}!',
        homeSubtitle: 'Your smart saving journey',
        skipsLabel: 'Skips',
        savingsLabel: 'Savings',
        pointsLabel: 'Points',
        purchasesLabel: 'Purchases',
        actionsTitle: 'Quick Actions',
        addSkipBtn: 'ğŸ’¸ Track Skip',
        addPurchaseBtn: 'ğŸ›’ Track Purchase',
        learnBtn: 'ğŸ’¡ Learn to Invest',
        historyBtn: 'ğŸ“Š History & Tracking',
        
        // Add Skip Screen
        skipTitle: 'Track Skip',
        skipSubtitle: 'What did you skip?',
        skipItemLabel: 'What did you skip?',
        skipAmountLabel: 'How much would it cost?',
        skipCategoryLabel: 'Category',
        skipNotesLabel: 'Notes (optional)',
        saveSkipBtn: 'Save Skip âœ“',
        
        // Add Purchase Screen
        purchaseTitle: 'Track Purchase',
        purchaseSubtitle: 'What did you buy?',
        purchaseItemLabel: 'What did you buy?',
        purchaseAmountLabel: 'How much did you pay?',
        purchaseCategoryLabel: 'Category',
        purchaseTimeLabel: 'What time?',
        purchaseNotesLabel: 'Notes (optional)',
        savePurchaseBtn: 'Save Purchase ğŸ›’',
        
        // Categories
        catFood: 'Food & Drinks',
        catClothes: 'Clothes',
        catEntertainment: 'Entertainment',
        catTransport: 'Transport',
        catTech: 'Technology',
        catOther: 'Other',
        
        // Investment Screen
        investTitle: 'Learn to Invest',
        investSubtitle: 'Financial Education',
        investResourcesTitle: 'Recommended Resources',
        link1: 'ğŸ“ˆ Compound Interest',
        link2: 'ğŸŒ± Early Saving',
        link3: 'ğŸ“Š What is a Stock?',
        link4: 'ğŸ’¼ What is a Bond?',
        link5: 'ğŸ¯ Risk Diversification',
        
        // History Screen
        historyTitle: 'History',
        historySubtitle: 'Your journey',
        todayTitle: 'ğŸ“… Today',
        todaySkipsLabel: 'Skipped:',
        todayPurchasesLabel: 'Purchased:',
        historyTableTitle: 'Detailed Comparison Table',
        thDate: 'Date',
        thSkip: 'Skip',
        thPurchase: 'Purchase',
        thCategory: 'Category',
        emptyHistory: 'No skips or purchases yet',
        viewSummaryBtn: 'ğŸ“Š Full Summary',
        
        // Summary Screen
        summaryTitle: 'Summary',
        summarySubtitle: 'Your data',
        summarySkipsLabel: 'Skips',
        summarySavingsLabel: 'Savings',
        summaryPointsLabel: 'Points',
        summaryPurchasesLabel: 'Purchases',
        analysisTitle: 'ğŸ¯ Behavioral Analysis',
        analysisText: 'Waiting for data...'
      }
    };
    
    // Firebase Configuration
    const firebaseConfig = {
     

// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDRB7jnKYNOQh7Ee3urpm3F-b3rMeCsl6k",
  authDomain: "skippapp-ffc0a.firebaseapp.com",
  projectId: "skippapp-ffc0a",
  storageBucket: "skippapp-ffc0a.firebasestorage.app",
  messagingSenderId: "727113113410",
  appId: "1:727113113410:web:99e9de80faab5fc5db32db",
  measurementId: "G-G5K00YSZXC"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app); 

    };
    
    // Initialize Firebase
    let analytics = null;
    try {
      firebase.initializeApp(firebaseConfig);
      analytics = firebase.analytics();
      console.log('âœ… Firebase Analytics initialized');
    } catch (error) {
      console.warn('âš ï¸ Firebase not configured');
    }
    
    // App State
    const app = {
      currentScreen: 'languageScreen',
      previousScreen: null,
      language: 'he',
      user: {},
      skips: [],
      purchases: [],
      
      // Initialize
      init() {
        this.loadData();
        
        // Check if already registered
        if (this.user.name) {
          this.updateLanguage(this.user.language || 'he');
          this.showScreen('homeScreen');
          this.updateHomeUI();
        }
        
        // Terms checkbox listener
        const acceptTerms = document.getElementById('acceptTerms');
        const continueBtn = document.getElementById('continueBtn');
        if (acceptTerms && continueBtn) {
          acceptTerms.addEventListener('change', function() {
            continueBtn.disabled = !this.checked;
          });
        }
        
        this.trackPageView('language_selection');
      },
      
      // Language Selection
      selectLanguage(lang) {
        this.language = lang;
        this.updateLanguage(lang);
        this.trackEvent('language_selected', { language: lang });
        this.showScreen('introScreen');
      },
      
      // Update UI Language
      updateLanguage(lang) {
        this.language = lang;
        const t = translations[lang];
        
        // Update direction
        document.documentElement.setAttribute('dir', lang === 'he' ? 'rtl' : 'ltr');
        document.body.setAttribute('dir', lang === 'he' ? 'rtl' : 'ltr');
        
        // Update all text elements
        Object.keys(t).forEach(key => {
          const el = document.getElementById(key);
          if (el) {
            if (el.tagName === 'INPUT' || el.tagName === 'SELECT' || el.tagName === 'TEXTAREA') {
              el.placeholder = t[key];
            } else {
              el.textContent = t[key];
            }
          }
        });
        
        // Update how it works list
        const howWorksList = document.getElementById('howWorksList');
        if (howWorksList && t.howWorksItems) {
          howWorksList.innerHTML = t.howWorksItems.map(item => `<li>${item}</li>`).join('');
        }
        
        // Update categories in selects
        const skipCategory = document.getElementById('skipCategory');
        const purchaseCategory = document.getElementById('purchaseCategory');
        if (skipCategory) {
          skipCategory.options[0].text = lang === 'he' ? '×‘×—×¨ ×§×˜×’×•×¨×™×”' : 'Select category';
        }
        if (purchaseCategory) {
          purchaseCategory.options[0].text = lang === 'he' ? '×‘×—×¨ ×§×˜×’×•×¨×™×”' : 'Select category';
        }
      },
      
      // Continue to Register
      continueToRegister() {
        this.showScreen('registerScreen');
      },
      
      // Register
      register(e) {
        e.preventDefault();
        
        const name = document.getElementById('userName').value;
        const age = parseInt(document.getElementById('userAge').value);
        const gender = document.querySelector('input[name="gender"]:checked').value;
        
        this.user = {
          name,
          age,
          gender,
          language: this.language,
          registeredAt: new Date().toISOString()
        };
        
        this.saveData();
        
        // Set user properties in Analytics
        if (analytics) {
          analytics.setUserProperties({
            age_group: this.getAgeGroup(age),
            gender: gender,
            language: this.language
          });
        }
        
        this.trackEvent('user_registered', {
          age,
          gender,
          language: this.language
        });
        
        // Update welcome message
        const t = translations[this.language];
        document.getElementById('homeTitle').textContent = t.homeTitle.replace('{name}', name);
        
        this.showScreen('welcomeScreen');
      },
      
      // Navigation
      showScreen(screenId) {
        this.previousScreen = this.currentScreen;
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(screenId).classList.add('active');
        this.currentScreen = screenId;
        this.trackPageView(screenId);
        
        // Update UI if needed
        if (screenId === 'homeScreen') {
          this.updateHomeUI();
        } else if (screenId === 'historyScreen') {
          this.updateHistoryUI();
        } else if (screenId === 'summaryScreen') {
          this.updateSummaryUI();
        }
      },
      
      goBack() {
        if (this.previousScreen) {
          this.showScreen(this.previousScreen);
        }
      },
      
      goHome() {
        this.showScreen('homeScreen');
      },
      
      // Add Skip
      addSkip(e) {
        e.preventDefault();
        
        const skip = {
          id: Date.now(),
          item: document.getElementById('skipItem').value,
          amount: parseFloat(document.getElementById('skipAmount').value),
          category: document.getElementById('skipCategory').value,
          notes: document.getElementById('skipNotes').value,
          points: parseFloat(document.getElementById('skipAmount').value) * 0.5,
          date: new Date().toISOString()
        };
        
        this.skips.push(skip);
        this.saveData();
        
        this.trackEvent('skip_added', {
          category: skip.category,
          amount: skip.amount,
          age: this.user.age,
          gender: this.user.gender
        });
        
        e.target.reset();
        const t = translations[this.language];
        alert(`${t.skipTitle}! ğŸ‰\n${skip.item}\n${skip.points} ${t.pointsLabel}`);
        this.showScreen('homeScreen');
      },
      
      // Add Purchase
      addPurchase(e) {
        e.preventDefault();
        
        const purchase = {
          id: Date.now(),
          item: document.getElementById('purchaseItem').value,
          amount: parseFloat(document.getElementById('purchaseAmount').value),
          category: document.getElementById('purchaseCategory').value,
          time: document.getElementById('purchaseTime').value,
          notes: document.getElementById('purchaseNotes').value,
          date: new Date().toISOString()
        };
        
        this.purchases.push(purchase);
        this.saveData();
        
        this.trackEvent('purchase_added', {
          category: purchase.category,
          amount: purchase.amount,
          age: this.user.age,
          gender: this.user.gender
        });
        
        e.target.reset();
        const t = translations[this.language];
        alert(`${t.purchaseTitle}! ğŸ“\n${purchase.item}`);
        this.showScreen('homeScreen');
      },
      
      // Open Link
      openLink(url) {
        this.trackEvent('investment_link_clicked', { url });
        window.open(url, '_blank');
      },
      
      // Update Home UI
      updateHomeUI() {
        const totalSkipsCount = this.skips.length;
        const totalSavings = this.skips.reduce((sum, s) => sum + s.amount, 0);
        const totalPoints = this.skips.reduce((sum, s) => sum + s.points, 0);
        const totalPurchasesCount = this.purchases.length;
        
        const currency = this.language === 'he' ? 'â‚ª' : '$';
        
        document.getElementById('totalSkips').textContent = totalSkipsCount;
        document.getElementById('totalSavings').textContent = `${currency}${totalSavings.toFixed(0)}`;
        document.getElementById('totalPoints').textContent = totalPoints.toFixed(0);
        document.getElementById('totalPurchases').textContent = totalPurchasesCount;
      },
      
      // Update History UI
      updateHistoryUI() {
        const t = translations[this.language];
        const currency = this.language === 'he' ? 'â‚ª' : '$';
        
        // Today's data
        const today = new Date().toDateString();
        const todaySkips = this.skips.filter(s => new Date(s.date).toDateString() === today);
        const todayPurchases = this.purchases.filter(p => new Date(p.date).toDateString() === today);
        
        const todaySkipsAmount = todaySkips.reduce((sum, s) => sum + s.amount, 0);
        const todayPurchasesAmount = todayPurchases.reduce((sum, p) => sum + p.amount, 0);
        
        document.getElementById('todaySkips').textContent = `${currency}${todaySkipsAmount.toFixed(0)}`;
        document.getElementById('todayPurchases').textContent = `${currency}${todayPurchasesAmount.toFixed(0)}`;
        
        const difference = todaySkipsAmount - todayPurchasesAmount;
        let comparisonText = '';
        if (difference > 0) {
          comparisonText = this.language === 'he' 
            ? `âœ… ××¢×•×œ×”! ×—×¡×›×ª ${difference.toFixed(0)} ×©×´×— ×”×™×•×!`
            : `âœ… Great! You saved ${currency}${difference.toFixed(0)} today!`;
        } else if (difference < 0) {
          comparisonText = this.language === 'he'
            ? `âš ï¸ ×”×•×¦××ª ${Math.abs(difference).toFixed(0)} ×©×´×— ×™×•×ª×¨ ×××” ×©×“×™×œ×’×ª`
            : `âš ï¸ You spent ${currency}${Math.abs(difference).toFixed(0)} more than you skipped`;
        } else {
          comparisonText = this.language === 'he' ? `ğŸ¯ ××™×–×•×Ÿ ××•×©×œ×!` : `ğŸ¯ Perfect balance!`;
        }
        document.getElementById('todayComparison').textContent = comparisonText;
        
        // History Table
        const tbody = document.getElementById('historyTableBody');
        
        if (this.skips.length === 0 && this.purchases.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="4">
                <div class="empty-state">
                  <div class="empty-state-icon">ğŸ“­</div>
                  <div class="empty-state-text">${t.emptyHistory}</div>
                </div>
              </td>
            </tr>
          `;
          return;
        }
        
        // Combine and group by date
        const allItems = [];
        
        // Add skips
        this.skips.forEach(skip => {
          allItems.push({
            date: new Date(skip.date),
            type: 'skip',
            ...skip
          });
        });
        
        // Add purchases
        this.purchases.forEach(purchase => {
          allItems.push({
            date: new Date(purchase.date),
            type: 'purchase',
            ...purchase
          });
        });
        
        // Sort by date (newest first)
        allItems.sort((a, b) => b.date - a.date);
        
        // Group by date
        const groupedByDate = {};
        allItems.forEach(item => {
          const dateKey = item.date.toLocaleDateString(this.language === 'he' ? 'he-IL' : 'en-US');
          if (!groupedByDate[dateKey]) {
            groupedByDate[dateKey] = { skips: [], purchases: [] };
          }
          if (item.type === 'skip') {
            groupedByDate[dateKey].skips.push(item);
          } else {
            groupedByDate[dateKey].purchases.push(item);
          }
        });
        
        // Build table
        let html = '';
        Object.keys(groupedByDate).forEach(dateKey => {
          const data = groupedByDate[dateKey];
          const maxRows = Math.max(data.skips.length, data.purchases.length);
          
          for (let i = 0; i < maxRows; i++) {
            const skip = data.skips[i];
            const purchase = data.purchases[i];
            
            html += '<tr>';
            
            // Date (only on first row of each date)
            if (i === 0) {
              html += `<td rowspan="${maxRows}" class="date-cell">${dateKey}</td>`;
            }
            
            // Skip
            if (skip) {
              html += `
                <td>
                  <div style="font-weight: 600;">${skip.item}</div>
                  <div class="skip-amount">${currency}${skip.amount.toFixed(0)}</div>
                  <div class="category-badge">${this.getCategoryName(skip.category)}</div>
                </td>
              `;
            } else {
              html += '<td style="background: #F8F8F8;">-</td>';
            }
            
            // Purchase
            if (purchase) {
              html += `
                <td>
                  <div style="font-weight: 600;">${purchase.item}</div>
                  <div class="purchase-amount">${currency}${purchase.amount.toFixed(0)}</div>
                  <div class="category-badge">${this.getCategoryName(purchase.category)}</div>
                </td>
              `;
            } else {
              html += '<td style="background: #F8F8F8;">-</td>';
            }
            
            // Category (combined)
            const categories = [];
            if (skip) categories.push(this.getCategoryName(skip.category));
            if (purchase) categories.push(this.getCategoryName(purchase.category));
            html += `<td>${categories.join('<br>')}</td>`;
            
            html += '</tr>';
          }
        });
        
        tbody.innerHTML = html;
      },
      
      // Get Category Name
      getCategoryName(category) {
        const t = translations[this.language];
        const map = {
          food: t.catFood,
          clothes: t.catClothes,
          entertainment: t.catEntertainment,
          transport: t.catTransport,
          tech: t.catTech,
          other: t.catOther
        };
        return map[category] || category;
      },
      
      // Update Summary UI
      updateSummaryUI() {
        const t = translations[this.language];
        const currency = this.language === 'he' ? 'â‚ª' : '$';
        
        const totalSkipsCount = this.skips.length;
        const totalSavings = this.skips.reduce((sum, s) => sum + s.amount, 0);
        const totalPoints = this.skips.reduce((sum, s) => sum + s.points, 0);
        const totalPurchasesCount = this.purchases.length;
        const totalPurchasesAmount = this.purchases.reduce((sum, p) => sum + p.amount, 0);
        
        document.getElementById('summarySkips').textContent = totalSkipsCount;
        document.getElementById('summarySavings').textContent = `${currency}${totalSavings.toFixed(0)}`;
        document.getElementById('summaryPoints').textContent = totalPoints.toFixed(0);
        document.getElementById('summaryPurchasesCount').textContent = totalPurchasesCount;
        
        // Behavior analysis
        let analysis = '';
        if (totalSkipsCount === 0 && totalPurchasesCount === 0) {
          analysis = this.language === 'he'
            ? '×”×ª×—×œ ×œ×ª×¢×“ ×“×™×œ×•×’×™× ×•×§× ×™×•×ª ×›×“×™ ×œ×¨××•×ª × ×™×ª×•×—!'
            : 'Start tracking skips and purchases to see analysis!';
        } else if (totalSavings > totalPurchasesAmount) {
          const netSaving = totalSavings - totalPurchasesAmount;
          analysis = this.language === 'he'
            ? `ğŸ‰ ××¦×•×™×Ÿ! ×“×™×œ×’×ª ×¢×œ ${currency}${totalSavings.toFixed(0)} ×•×§× ×™×ª ×¨×§ ${currency}${totalPurchasesAmount.toFixed(0)}. ×—×™×¡×›×•×Ÿ × ×§×™: ${currency}${netSaving.toFixed(0)}!`
            : `ğŸ‰ Excellent! Skipped ${currency}${totalSavings.toFixed(0)} and purchased only ${currency}${totalPurchasesAmount.toFixed(0)}. Net saving: ${currency}${netSaving.toFixed(0)}!`;
        } else if (totalSavings < totalPurchasesAmount) {
          analysis = this.language === 'he'
            ? `ğŸ¤” ×“×™×œ×’×ª ×¢×œ ${currency}${totalSavings.toFixed(0)} ××‘×œ ×§× ×™×ª ${currency}${totalPurchasesAmount.toFixed(0)}. × ×¡×” ×œ×“×œ×’ ×¢×œ ×™×•×ª×¨!`
            : `ğŸ¤” Skipped ${currency}${totalSavings.toFixed(0)} but purchased ${currency}${totalPurchasesAmount.toFixed(0)}. Try skipping more!`;
        } else {
          analysis = this.language === 'he' ? `âš–ï¸ ××™×–×•×Ÿ ××•×©×œ×!` : `âš–ï¸ Perfect balance!`;
        }
        document.getElementById('analysisText').textContent = analysis;
      },
      
      // Analytics
      trackPageView(screenName) {
        if (analytics) {
          analytics.logEvent('screen_view', {
            screen_name: screenName,
            app_version: '5.1'
          });
        }
        console.log('ğŸ“Š Page view:', screenName);
      },
      
      trackEvent(eventName, params = {}) {
        if (analytics) {
          analytics.logEvent(eventName, {
            ...params,
            timestamp: new Date().toISOString()
          });
        }
        console.log('ğŸ“Š Event:', eventName, params);
      },
      
      getAgeGroup(age) {
        if (age < 18) return '13-17';
        if (age < 25) return '18-24';
        if (age < 35) return '25-34';
        if (age < 45) return '35-44';
        if (age < 55) return '45-54';
        return '55+';
      },
      
      // Storage
      saveData() {
        localStorage.setItem('skipapp_user', JSON.stringify(this.user));
        localStorage.setItem('skipapp_skips', JSON.stringify(this.skips));
        localStorage.setItem('skipapp_purchases', JSON.stringify(this.purchases));
      },
      
      loadData() {
        const user = localStorage.getItem('skipapp_user');
        const skips = localStorage.getItem('skipapp_skips');
        const purchases = localStorage.getItem('skipapp_purchases');
        
        if (user) this.user = JSON.parse(user);
        if (skips) this.skips = JSON.parse(skips);
        if (purchases) this.purchases = JSON.parse(purchases);
      }
    };
    
    // Initialize app
    window.addEventListener('DOMContentLoaded', () => {
      app.init();
      
      // Register Service Worker
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker
          .register('/service-worker.js')
          .then((registration) => {
            console.log('âœ… Service Worker registered:', registration.scope);
          })
          .catch((error) => {
            console.warn('âš ï¸ Service Worker registration failed:', error);
          });
      }
    });
  </script>
</body>
</html>
