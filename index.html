<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="SKIP">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#5B8A72">
  <title>SKIP - ××©×—×§ ×”×—×™×¡×›×•×Ÿ ×”×—×›×</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    html, body { height: 100%; overflow: hidden; }
    body { font-family: 'Heebo', sans-serif; background: linear-gradient(135deg, #5B8A72 0%, #7BA896 100%); min-height: 100vh; }
    body.en { font-family: 'Poppins', sans-serif; direction: ltr; }
    body.en .app { direction: ltr; }
    :root { --primary: #5B8A72; --primary-light: #7BA896; --secondary: #E8B86D; --accent: #F4A261; --bg: #FDF8F3; --text: #2D3436; --text-light: #636E72; --danger: #E74C3C; }
    .app { width: 100%; height: 100vh; max-width: 500px; margin: 0 auto; background: var(--bg); position: relative; overflow: hidden; }
    @media (min-width: 501px) { body { display: flex; justify-content: center; align-items: center; padding: 20px; } .app { height: 90vh; max-height: 850px; border-radius: 40px; box-shadow: 0 50px 100px rgba(0,0,0,0.3); } }
    .screen { display: none; width: 100%; height: 100%; flex-direction: column; overflow: hidden; }
    .screen.active { display: flex; }
    .hidden { display: none !important; }
    
    /* LANGUAGE SELECT */
    .lang-screen { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); align-items: center; justify-content: center; padding: 40px 20px; text-align: center; }
    .lang-logo { width: 120px; height: 120px; background: rgba(255,255,255,0.2); border-radius: 30px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; position: relative; }
    .lang-logo-icon { font-size: 60px; }
    .lang-logo-play { position: absolute; bottom: -5px; right: -5px; width: 40px; height: 40px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .lang-logo-play::after { content: ''; width: 0; height: 0; border-left: 12px solid var(--primary); border-top: 7px solid transparent; border-bottom: 7px solid transparent; margin-left: 3px; }
    .lang-title { font-size: 50px; font-weight: 800; color: #fff; letter-spacing: -1px; margin-bottom: 5px; }
    .lang-sub { font-size: 14px; color: rgba(255,255,255,0.9); margin-bottom: 40px; }
    .lang-label { font-size: 16px; color: #fff; margin-bottom: 20px; font-weight: 500; }
    .lang-btns { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 280px; }
    .lang-btn { padding: 18px 30px; font-size: 18px; font-weight: 600; border: none; border-radius: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; transition: transform 0.2s; }
    .lang-btn:active { transform: scale(0.95); }
    .lang-btn.he { background: #fff; color: var(--primary); }
    .lang-btn.en { background: rgba(255,255,255,0.2); color: #fff; border: 2px solid rgba(255,255,255,0.5); }
    .lang-flag { font-size: 28px; }

    /* TERMS */
    .terms-screen { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); padding: 40px 20px 20px; }
    .terms-header { text-align: center; margin-bottom: 15px; flex-shrink: 0; }
    .terms-icon { font-size: 45px; margin-bottom: 8px; }
    .terms-title { font-size: 26px; font-weight: 800; color: #fff; margin-bottom: 5px; }
    .terms-sub { font-size: 13px; color: rgba(255,255,255,0.9); }
    .terms-box { background: #fff; border-radius: 18px; padding: 18px; flex: 1; overflow-y: auto; margin-bottom: 12px; min-height: 0; }
    .terms-sec { margin-bottom: 14px; }
    .terms-sec:last-child { margin-bottom: 0; }
    .terms-sec h3 { font-size: 14px; color: var(--text); margin-bottom: 6px; }
    .terms-sec p, .terms-sec li { font-size: 12px; color: var(--text-light); line-height: 1.5; }
    .terms-sec ul { padding-right: 18px; margin: 0; }
    body.en .terms-sec ul { padding-right: 0; padding-left: 18px; }
    .terms-sec li { margin-bottom: 3px; }
    .terms-footer { flex-shrink: 0; }
    .terms-check { background: rgba(255,255,255,0.15); border-radius: 12px; padding: 14px; margin-bottom: 12px; }
    .check-label { display: flex; align-items: flex-start; gap: 10px; cursor: pointer; }
    .check-label input { width: 24px; height: 24px; cursor: pointer; flex-shrink: 0; margin-top: 2px; accent-color: #fff; }
    .check-text { font-size: 13px; color: #fff; line-height: 1.4; }
    .btn-accept { width: 100%; padding: 16px; font-size: 16px; font-weight: 600; color: #888; background: #ccc; border: none; border-radius: 14px; cursor: not-allowed; font-family: inherit; transition: all 0.3s ease; }
    .btn-accept.enabled { color: var(--primary); background: #fff; cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.15); }
    
    /* SPLASH */
    .splash-screen { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); align-items: center; justify-content: center; padding: 40px 20px; text-align: center; position: relative; }
    .splash-logo { width: 120px; height: 120px; background: rgba(255,255,255,0.2); border-radius: 30px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; position: relative; animation: float 3s ease-in-out infinite; }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .splash-logo-icon { font-size: 60px; }
    .splash-logo-play { position: absolute; bottom: -5px; right: -5px; width: 40px; height: 40px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .splash-logo-play::after { content: ''; width: 0; height: 0; border-left: 12px solid var(--primary); border-top: 7px solid transparent; border-bottom: 7px solid transparent; margin-left: 3px; }
    .splash-title { font-size: 60px; font-weight: 800; color: #fff; letter-spacing: -2px; }
    .splash-sub { font-size: 16px; color: rgba(255,255,255,0.9); margin-top: 5px; }
    .btn-start { margin-top: 50px; padding: 16px 50px; font-size: 17px; font-weight: 600; color: var(--primary); background: #fff; border: none; border-radius: 50px; cursor: pointer; font-family: inherit; box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
    .splash-back { position: absolute; top: 40px; right: 20px; }
    body.en .splash-back { right: auto; left: 20px; }
    
    /* FORM */
    .form-screen { background: var(--bg); padding: 50px 20px 20px; }
    .back-btn { display: inline-flex; align-items: center; gap: 5px; background: #fff; border: none; border-radius: 10px; padding: 8px 14px; cursor: pointer; color: var(--text); font-size: 13px; font-weight: 500; font-family: inherit; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .back-btn:active { transform: scale(0.95); }
    .back-btn.light { background: rgba(255,255,255,0.2); color: #fff; box-shadow: none; }
    .form-title { font-size: 26px; font-weight: 800; color: var(--text); margin-bottom: 5px; }
    .form-sub { font-size: 14px; color: var(--text-light); margin-bottom: 25px; }
    .input { width: 100%; padding: 16px; font-size: 16px; border: 2px solid #E0E0E0; border-radius: 12px; outline: none; font-family: inherit; background: #fff; }
    .input:focus { border-color: var(--primary); }
    .btn-next { width: 100%; margin-top: 25px; padding: 16px; font-size: 16px; font-weight: 600; color: #fff; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); border: none; border-radius: 12px; cursor: pointer; font-family: inherit; }
    .info-box { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); border-radius: 12px; padding: 15px; margin-top: 15px; }
    .info-box p { margin: 0; font-size: 13px; color: var(--text); line-height: 1.5; }
    .opt { background: #fff; border-radius: 16px; padding: 18px; margin-bottom: 12px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 2px solid transparent; display: flex; align-items: center; gap: 14px; }
    .opt:active { transform: scale(0.98); border-color: var(--primary); }
    .opt-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
    .opt-icon.green { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); }
    .opt-icon.orange { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); }
    .opt h3 { font-size: 16px; font-weight: 600; color: var(--text); margin: 0 0 3px; }
    .opt p { font-size: 12px; color: var(--text-light); margin: 0; }
    
    /* GROUP SHARE */
    .share-box { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-radius: 16px; padding: 20px; margin-top: 20px; text-align: center; }
    .share-box h4 { font-size: 15px; color: var(--text); margin: 0 0 15px; }
    .share-btns { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .share-btn { display: inline-flex; align-items: center; gap: 8px; padding: 12px 20px; border-radius: 25px; border: none; font-size: 14px; font-weight: 600; cursor: pointer; font-family: inherit; }
    .share-btn.whatsapp { background: #25D366; color: #fff; }
    .share-btn.email { background: #EA4335; color: #fff; }
    .share-btn.copy { background: #fff; color: var(--text); box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    
    /* DASHBOARD */
    .dash-screen { background: var(--bg); }
    .dash-head { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); padding: 40px 20px 50px; border-radius: 0 0 25px 25px; flex-shrink: 0; }
    .dash-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
    .dash-greet { font-size: 13px; color: rgba(255,255,255,0.8); margin: 0 0 3px; }
    .dash-title { font-size: 20px; font-weight: 700; color: #fff; margin: 0; }
    .head-acts { display: flex; gap: 8px; }
    .streak { background: rgba(255,255,255,0.2); border-radius: 10px; padding: 7px 12px; color: #fff; font-size: 13px; }
    .set-btn { background: rgba(255,255,255,0.2); border: none; border-radius: 10px; padding: 7px 12px; color: #fff; font-size: 16px; cursor: pointer; }
    .stats { background: #fff; border-radius: 16px; padding: 18px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: flex; justify-content: space-around; text-align: center; }
    .stat { flex: 1; }
    .stat-div { width: 1px; background: #EEE; margin: 0 10px; }
    .stat-lbl { font-size: 10px; color: var(--text-light); margin: 0; }
    .stat-val { font-size: 22px; font-weight: 800; margin: 3px 0 0; }
    .stat-val.p { color: var(--primary); }
    .stat-val.s { color: var(--secondary); }
    .stat-val.a { color: var(--accent); }
    .tabs { display: flex; background: #fff; border-radius: 12px; padding: 4px; margin: -15px 20px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: relative; z-index: 10; flex-shrink: 0; }
    .tab { flex: 1; padding: 10px; border: none; border-radius: 10px; background: transparent; color: var(--text-light); font-weight: 600; font-size: 12px; cursor: pointer; font-family: inherit; }
    .tab.on { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); color: #fff; }
    .dash-content { padding: 15px 20px 100px; flex: 1; overflow-y: auto; min-height: 0; }
    .period-sel { display: flex; background: #F0F0F0; border-radius: 10px; padding: 4px; margin: 15px 0; }
    .period { flex: 1; padding: 10px; border: none; border-radius: 8px; background: transparent; color: var(--text-light); font-weight: 600; font-size: 13px; cursor: pointer; font-family: inherit; }
    .period.on { background: #fff; color: var(--primary); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .sum-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
    .sum-card { border-radius: 14px; padding: 18px; text-align: center; }
    .sum-card.green { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); }
    .sum-card.orange { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); }
    .sum-lbl { font-size: 11px; color: var(--text-light); margin: 0; }
    .sum-val { font-size: 26px; font-weight: 800; margin: 5px 0 0; }
    .sum-val.p { color: var(--primary); }
    .sum-val.s { color: var(--secondary); }
    .sec-title { font-size: 14px; font-weight: 600; color: var(--text); margin: 20px 0 12px; }
    .cat-card { background: #fff; border-radius: 14px; padding: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .cat-title { font-size: 13px; font-weight: 600; color: var(--text); margin: 0 0 12px; }
    .cat-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #F0F0F0; }
    .cat-item:last-child { border-bottom: none; }
    .cat-info { display: flex; align-items: center; gap: 8px; }
    .cat-icon { font-size: 18px; }
    .cat-name { font-size: 13px; color: var(--text); }
    .cat-pts { font-size: 13px; font-weight: 600; color: var(--primary); }
    .empty { background: #fff; border-radius: 16px; padding: 40px 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    .empty-icon { font-size: 50px; margin-bottom: 15px; }
    .empty p { color: var(--text-light); font-size: 14px; line-height: 1.6; margin: 0; }
    .skip { background: #fff; border-radius: 14px; padding: 14px; margin-bottom: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 12px; cursor: pointer; }
    .skip-icon { width: 42px; height: 42px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
    .skip-det { flex: 1; }
    .skip-name { font-size: 14px; font-weight: 600; color: var(--text); margin: 0; }
    .skip-meta { font-size: 11px; color: var(--text-light); margin: 2px 0 0; }
    .skip-pts { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-radius: 8px; padding: 5px 10px; font-size: 13px; font-weight: 700; color: var(--primary); }
    .fab { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); width: 65px; height: 65px; border-radius: 50%; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); border: none; box-shadow: 0 10px 30px rgba(91,138,114,0.4); cursor: pointer; font-size: 30px; color: #fff; display: flex; align-items: center; justify-content: center; z-index: 50; }
    .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: flex-end; justify-content: center; z-index: 100; }
    .modal.on { display: flex; }
    .modal-box { background: var(--bg); width: 100%; max-width: 500px; border-radius: 25px 25px 0 0; padding: 25px 20px 35px; max-height: 85vh; overflow-y: auto; }
    .modal-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }
    .modal-title { font-size: 20px; font-weight: 700; color: var(--text); margin: 0; }
    .modal-del { background: #FFE5E5; border: none; border-radius: 10px; padding: 8px 12px; font-size: 16px; cursor: pointer; }
    .cats-lbl { font-size: 13px; font-weight: 600; color: var(--text); margin: 0 0 10px; }
    .cats-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 15px; }
    .cat-opt { background: #fff; border-radius: 12px; padding: 10px 5px; text-align: center; cursor: pointer; border: 2px solid transparent; }
    .cat-opt.sel { border-color: var(--primary); background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); }
    .cat-opt-icon { font-size: 22px; margin-bottom: 4px; }
    .cat-opt-name { font-size: 10px; color: var(--text-light); }
    .pts-prev { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-radius: 12px; padding: 15px; text-align: center; margin: 15px 0; }
    .pts-prev-lbl { font-size: 12px; color: var(--text-light); margin: 0; }
    .pts-prev-val { font-size: 28px; font-weight: 800; color: var(--primary); margin: 5px 0 0; }
    .pts-prev-money { font-size: 14px; color: var(--text-light); margin: 0; }
    .btn-cancel { width: 100%; margin-top: 10px; padding: 14px; font-size: 14px; font-weight: 500; color: var(--text-light); background: transparent; border: none; cursor: pointer; font-family: inherit; }
    .confirm { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 200; }
    .confirm.on { display: flex; }
    .confirm-box { background: #fff; border-radius: 20px; padding: 30px; width: 85%; max-width: 320px; text-align: center; }
    .confirm-icon { font-size: 50px; margin-bottom: 15px; }
    .confirm-box h3 { font-size: 20px; font-weight: 700; color: var(--text); margin: 0 0 10px; }
    .confirm-box p { font-size: 14px; color: var(--text-light); margin: 0 0 20px; }
    .confirm-btns { display: flex; gap: 10px; flex-direction: column; }
    .confirm-btn { flex: 1; padding: 14px; border: none; border-radius: 12px; font-size: 14px; font-weight: 600; cursor: pointer; font-family: inherit; }
    .confirm-btn.cancel { background: #F0F0F0; color: var(--text); }
    .confirm-btn.danger { background: var(--danger); color: #fff; }
    .confirm-btn.primary { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); color: #fff; }
    .settings-screen { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); }
    .set-head { padding: 50px 20px 30px; flex-shrink: 0; }
    .set-head-inner { display: flex; align-items: center; gap: 15px; }
    .set-title { font-size: 24px; font-weight: 700; color: #fff; margin: 0; }
    .set-content { flex: 1; background: var(--bg); border-radius: 25px 25px 0 0; padding: 25px 20px; overflow-y: auto; min-height: 0; }
    .set-card { background: #fff; border-radius: 16px; padding: 18px; margin-bottom: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .set-card-title { font-size: 14px; font-weight: 600; color: var(--text); margin: 0 0 15px; }
    .set-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #F0F0F0; }
    .set-row:last-child { border-bottom: none; }
    .set-lbl { font-size: 13px; color: var(--text-light); }
    .set-val { font-size: 13px; font-weight: 600; color: var(--text); }
    .btn-set { width: 100%; padding: 14px; font-size: 14px; font-weight: 500; border: none; border-radius: 12px; cursor: pointer; font-family: inherit; margin-bottom: 10px; }
    .btn-set.outline { background: #fff; color: var(--text); box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .btn-set.danger { background: #FFE5E5; color: var(--danger); }
    .ver { text-align: center; font-size: 12px; color: var(--text-light); margin-top: 20px; }
    .invest-screen { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); }
    .inv-head { padding: 50px 20px 25px; flex-shrink: 0; }
    .inv-head-inner { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
    .inv-title { font-size: 24px; font-weight: 700; color: #fff; margin: 0; }
    .inv-sum { background: rgba(255,255,255,0.2); border-radius: 16px; padding: 20px; text-align: center; }
    .inv-sum-lbl { font-size: 13px; color: rgba(255,255,255,0.8); margin: 0 0 5px; }
    .inv-sum-val { font-size: 36px; font-weight: 800; color: #fff; margin: 0; }
    .inv-content { flex: 1; background: var(--bg); border-radius: 25px 25px 0 0; padding: 25px 20px; overflow-y: auto; min-height: 0; }
    .warn-box { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border-radius: 12px; padding: 12px; margin-bottom: 15px; }
    .warn-box p { margin: 0; font-size: 12px; color: var(--text); }
    .plat { background: #fff; border-radius: 14px; padding: 14px; margin-bottom: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; gap: 12px; }
    .plat-icon { width: 45px; height: 45px; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; }
    .plat-info { flex: 1; }
    .plat-name { font-size: 14px; font-weight: 600; color: var(--text); margin: 0; }
    .plat-desc { font-size: 12px; color: var(--text-light); margin: 3px 0 0; }
    .plat-tags { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 8px; }
    .plat-tag { background: #F5F5F5; padding: 3px 8px; border-radius: 15px; font-size: 10px; color: var(--text-light); }
    .plat-note { font-size: 11px; margin: 8px 0 0; }
    .plat-note.gold { color: var(--secondary); }
    .plat-note.green { color: var(--primary); }
    .btn-share { width: 100%; padding: 16px; font-size: 15px; font-weight: 600; color: #fff; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); border: none; border-radius: 12px; cursor: pointer; font-family: inherit; margin-top: 10px; }
    .plat-links { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
    .plat-link { display: inline-flex; align-items: center; gap: 4px; padding: 6px 12px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); color: #fff; text-decoration: none; border-radius: 20px; font-size: 11px; font-weight: 500; }
    .summary-screen { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); position: relative; }
    .sum-head { padding: 50px 20px 25px; flex-shrink: 0; text-align: center; }
    .sum-emoji { font-size: 80px; margin-bottom: 15px; }
    .sum-title { font-size: 28px; font-weight: 800; color: #fff; margin: 0 0 5px; }
    .sum-subtitle { font-size: 14px; color: rgba(255,255,255,0.9); margin: 0; }
    .sum-content { flex: 1; background: var(--bg); border-radius: 25px 25px 0 0; padding: 25px 20px; overflow-y: auto; min-height: 0; }
    .sum-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
    .sum-stat { background: #fff; border-radius: 16px; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .sum-stat-icon { font-size: 30px; margin-bottom: 8px; }
    .sum-stat-val { font-size: 24px; font-weight: 800; color: var(--primary); margin: 0; }
    .sum-stat-lbl { font-size: 12px; color: var(--text-light); margin: 5px 0 0; }
    .sum-message { background: #fff; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .sum-message h3 { font-size: 16px; color: var(--text); margin: 0 0 10px; }
    .sum-message p { font-size: 13px; color: var(--text-light); line-height: 1.6; margin: 0; }
    .sum-actions { display: flex; flex-direction: column; gap: 10px; }
    .btn-sum { width: 100%; padding: 16px; font-size: 15px; font-weight: 600; border: none; border-radius: 12px; cursor: pointer; font-family: inherit; }
    .btn-sum.primary { color: #fff; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); }
    .btn-sum.secondary { color: var(--primary); background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .btn-sum.outline { color: var(--text-light); background: transparent; }
  </style>
</head>
<body>
  <div class="app">
    
    <!-- LANGUAGE SELECT -->
    <div class="screen lang-screen active" id="s-lang">
      <div class="lang-logo">
        <span class="lang-logo-icon">â­ï¸</span>
        <div class="lang-logo-play"></div>
      </div>
      <h1 class="lang-title">SKIP</h1>
      <p class="lang-sub">Smart Saving Game</p>
      <p class="lang-label">ğŸŒ Choose Language / ×‘×—×¨ ×©×¤×”</p>
      <div class="lang-btns">
        <button class="lang-btn he" id="btnLangHe"><span class="lang-flag">ğŸ‡®ğŸ‡±</span> ×¢×‘×¨×™×ª</button>
        <button class="lang-btn en" id="btnLangEn"><span class="lang-flag">ğŸ‡ºğŸ‡¸</span> English</button>
      </div>
    </div>
    
    <!-- TERMS -->
    <div class="screen terms-screen" id="s-terms">
      <div class="terms-header"><div class="terms-icon">ğŸ“‹</div><h1 class="terms-title" data-he="×ª× ××™ ×©×™××•×©" data-en="Terms of Use">×ª× ××™ ×©×™××•×©</h1><p class="terms-sub" data-he="×œ×¤× ×™ ×©× ×ª×—×™×œ, ×—×©×•×‘ ×©×ª×§×¨× ×•×ª×¡×›×™×" data-en="Please read and agree before we start">×œ×¤× ×™ ×©× ×ª×—×™×œ, ×—×©×•×‘ ×©×ª×§×¨× ×•×ª×¡×›×™×</p></div>
      <div class="terms-box" id="termsBox">
        <div class="terms-sec"><h3>ğŸ¯ <span data-he="××˜×¨×ª ×”××¤×œ×™×§×¦×™×”" data-en="App Purpose">××˜×¨×ª ×”××¤×œ×™×§×¦×™×”</span></h3><p data-he="SKIP ×”×™× ××¤×œ×™×§×¦×™×” ×—×™× ×•×›×™×ª ×œ×¤×™×ª×•×— ××•×“×¢×•×ª ×¤×™× × ×¡×™×ª." data-en="SKIP is an educational app for developing financial awareness.">SKIP ×”×™× ××¤×œ×™×§×¦×™×” ×—×™× ×•×›×™×ª ×œ×¤×™×ª×•×— ××•×“×¢×•×ª ×¤×™× × ×¡×™×ª.</p></div>
        <div class="terms-sec"><h3>âš ï¸ <span data-he="×”×‘×”×¨×•×ª" data-en="Disclaimers">×”×‘×”×¨×•×ª</span></h3><ul><li data-he="×”××¤×œ×™×§×¦×™×” ×”×™× ×›×œ×™ ×—×™× ×•×›×™ ×‘×œ×‘×“" data-en="The app is for educational purposes only">×”××¤×œ×™×§×¦×™×” ×”×™× ×›×œ×™ ×—×™× ×•×›×™ ×‘×œ×‘×“</li><li data-he="×”× ×§×•×“×•×ª ×”× ×œ×”××—×©×” ×‘×œ×‘×“" data-en="Points are for illustration only">×”× ×§×•×“×•×ª ×”× ×œ×”××—×©×” ×‘×œ×‘×“</li><li data-he="×”×¦×¢×•×ª ×”×”×©×§×¢×” ×”×Ÿ ××™×“×¢ ×›×œ×œ×™" data-en="Investment suggestions are general information">×”×¦×¢×•×ª ×”×”×©×§×¢×” ×”×Ÿ ××™×“×¢ ×›×œ×œ×™</li></ul></div>
        <div class="terms-sec"><h3>ğŸ‘¶ <span data-he="××ª×—×ª ×œ-18" data-en="Under 18">××ª×—×ª ×œ-18</span></h3><p data-he="×”×©×™××•×© ××•×ª× ×” ×‘×”×¡×›××ª ×”×•×¨×”." data-en="Use requires parental consent.">×”×©×™××•×© ××•×ª× ×” ×‘×”×¡×›××ª ×”×•×¨×”.</p></div>
        <div class="terms-sec"><h3>ğŸ”’ <span data-he="×¤×¨×˜×™×•×ª" data-en="Privacy">×¤×¨×˜×™×•×ª</span></h3><ul><li data-he="×”××™×“×¢ × ×©××¨ ××§×•××™×ª ×‘×œ×‘×“" data-en="Data is stored locally only">×”××™×“×¢ × ×©××¨ ××§×•××™×ª ×‘×œ×‘×“</li><li data-he="×× ×—× ×• ×œ× ××•×¡×¤×™× ××™×“×¢" data-en="We do not collect any data">×× ×—× ×• ×œ× ××•×¡×¤×™× ××™×“×¢</li></ul></div>
      </div>
      <div class="terms-footer">
        <div class="terms-check"><label class="check-label"><input type="checkbox" id="chkTerms"><span class="check-text" data-he="×§×¨××ª×™ ×•×× ×™ ××¡×›×™×/×” ×œ×ª× ××™ ×”×©×™××•×©" data-en="I have read and agree to the Terms of Use">×§×¨××ª×™ ×•×× ×™ ××¡×›×™×/×” ×œ×ª× ××™ ×”×©×™××•×©</span></label></div>
        <button class="btn-accept" id="btnAccept" data-he-off="â¬œ ×™×© ×œ×¡××Ÿ ××ª ×ª×™×‘×ª ×”××™×©×•×¨" data-en-off="â¬œ Please check the box above" data-he-on="×× ×™ ××¡×›×™×/×” - ×‘×•××• × ×ª×—×™×œ! ğŸš€" data-en-on="I agree - Let's start! ğŸš€">â¬œ ×™×© ×œ×¡××Ÿ ××ª ×ª×™×‘×ª ×”××™×©×•×¨</button>
      </div>
    </div>
    
    <!-- SPLASH -->
    <div class="screen splash-screen" id="s-splash">
      <div class="splash-back"><button class="back-btn light" id="backToTerms"><span>âœ</span> <span data-he="×ª× ××™×" data-en="Terms">×ª× ××™×</span></button></div>
      <div class="splash-logo">
        <span class="splash-logo-icon">â­ï¸</span>
        <div class="splash-logo-play"></div>
      </div>
      <h1 class="splash-title">SKIP</h1>
      <p class="splash-sub" data-he="×“×œ×’ ×¢×œ ×”×”×•×¦××”. ×¦×‘×•×¨ ×œ×¢×ª×™×“." data-en="Skip the expense. Save for the future.">×“×œ×’ ×¢×œ ×”×”×•×¦××”. ×¦×‘×•×¨ ×œ×¢×ª×™×“.</p>
      <button class="btn-start" id="btnStart" data-he="×‘×•××• × ×ª×—×™×œ ğŸš€" data-en="Let's Start ğŸš€">×‘×•××• × ×ª×—×™×œ ğŸš€</button>
    </div>
    
    <!-- NAME -->
    <div class="screen form-screen" id="s-name">
      <button class="back-btn" id="backToSplash"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button>
      <h2 class="form-title" data-he="ğŸ‘‹ ×©×œ×•×!" data-en="ğŸ‘‹ Hello!">ğŸ‘‹ ×©×œ×•×!</h2>
      <p class="form-sub" data-he="××™×š ×§×•×¨××™× ×œ×š?" data-en="What's your name?">××™×š ×§×•×¨××™× ×œ×š?</p>
      <input type="text" class="input" id="inName" data-he-placeholder="×”×©× ×©×œ×š..." data-en-placeholder="Your name...">
      <button class="btn-next" id="btnName" data-he="×”××©×š" data-en="Continue">×”××©×š</button>
    </div>
    
    <!-- AGE -->
    <div class="screen form-screen" id="s-age">
      <button class="back-btn" id="backToName"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button>
      <h2 class="form-title" data-he="ğŸ‚ ×‘×Ÿ/×‘×ª ×›××”?" data-en="ğŸ‚ How old are you?">ğŸ‚ ×‘×Ÿ/×‘×ª ×›××”?</h2>
      <p class="form-sub" data-he="×–×” ×™×¢×–×•×¨ ×œ×”×ª××™× ××¤×©×¨×•×™×•×ª" data-en="This helps us customize options">×–×” ×™×¢×–×•×¨ ×œ×”×ª××™× ××¤×©×¨×•×™×•×ª</p>
      <input type="number" class="input" id="inAge" data-he-placeholder="×”×’×™×œ ×©×œ×š..." data-en-placeholder="Your age..." min="10" max="99">
      <div class="info-box hidden" id="u18info"><p data-he="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ××ª×—×ª ×œ-18? ×”×”×•×¨×™× ×™×¢×–×¨×•!" data-en="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Under 18? Parents can help!">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ××ª×—×ª ×œ-18? ×”×”×•×¨×™× ×™×¢×–×¨×•!</p></div>
      <button class="btn-next" id="btnAge" data-he="×”××©×š" data-en="Continue">×”××©×š</button>
    </div>
    
    <!-- MODE -->
    <div class="screen form-screen" id="s-mode">
      <button class="back-btn" id="backToAge"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button>
      <h2 class="form-title"><span data-he="×”×™×™" data-en="Hey">×”×™×™</span> <span id="greetName"></span>! ğŸ¯</h2>
      <p class="form-sub" data-he="××™×š ×ª×¨×¦×” ×œ×©×—×§?" data-en="How would you like to play?">××™×š ×ª×¨×¦×” ×œ×©×—×§?</p>
      <div class="opt" id="modeSolo"><div class="opt-icon green">ğŸ‘¤</div><div><h3 data-he="××©×—×§ ×™×—×™×“" data-en="Solo Game">××©×—×§ ×™×—×™×“</h3><p data-he="×”×ª×—×¨×” ××•×œ ×¢×¦××š" data-en="Compete against yourself">×”×ª×—×¨×” ××•×œ ×¢×¦××š</p></div></div>
      <div class="opt" id="modeGroup"><div class="opt-icon orange">ğŸ‘¥</div><div><h3 data-he="×§×‘×•×¦×”" data-en="Group">×§×‘×•×¦×”</h3><p data-he="×”×ª×—×¨×• ×™×—×“" data-en="Compete together">×”×ª×—×¨×• ×™×—×“</p></div></div>
      <div class="share-box hidden" id="groupShare">
        <h4 data-he="ğŸ“¤ ×©×ª×£ ×¢× ×—×‘×¨×™×" data-en="ğŸ“¤ Share with friends">ğŸ“¤ ×©×ª×£ ×¢× ×—×‘×¨×™×</h4>
        <div class="share-btns">
          <button class="share-btn whatsapp" id="shareWhatsapp">ğŸ“± WhatsApp</button>
          <button class="share-btn email" id="shareEmail">âœ‰ï¸ Email</button>
          <button class="share-btn copy" id="shareCopy" data-he="ğŸ“‹ ×”×¢×ª×§ ×œ×™× ×§" data-en="ğŸ“‹ Copy Link">ğŸ“‹ ×”×¢×ª×§ ×œ×™× ×§</button>
        </div>
      </div>
    </div>
    
    <!-- TIME -->
    <div class="screen form-screen" id="s-time">
      <button class="back-btn" id="backToMode"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button>
      <h2 class="form-title" data-he="â±ï¸ ×›××” ×–××Ÿ?" data-en="â±ï¸ How long?">â±ï¸ ×›××” ×–××Ÿ?</h2>
      <p class="form-sub" data-he="×‘×—×¨ ××©×š ××ª×’×¨" data-en="Choose challenge duration">×‘×—×¨ ××©×š ××ª×’×¨</p>
      <div class="opt" id="timeWeek"><div class="opt-icon green">ğŸ“…</div><div><h3 data-he="×©×‘×•×¢" data-en="Week">×©×‘×•×¢</h3><p data-he="××ª×’×¨ ×§×¦×¨" data-en="Short challenge">××ª×’×¨ ×§×¦×¨</p></div></div>
      <div class="opt" id="timeMonth"><div class="opt-icon orange">ğŸ—“ï¸</div><div><h3 data-he="×—×•×“×©" data-en="Month">×—×•×“×©</h3><p data-he="×‘× ×™×™×ª ×”×¨×’×œ" data-en="Build a habit">×‘× ×™×™×ª ×”×¨×’×œ</p></div></div>
      <div class="opt" id="timeYear"><div class="opt-icon green">ğŸ¯</div><div><h3 data-he="×©× ×”" data-en="Year">×©× ×”</h3><p data-he="×©×™× ×•×™ ×—×™×™×" data-en="Life change">×©×™× ×•×™ ×—×™×™×</p></div></div>
    </div>
    
    <!-- DASHBOARD -->
    <div class="screen dash-screen" id="s-dash">
      <div class="dash-head">
        <div class="dash-top">
          <div style="display:flex;align-items:center;gap:10px;">
            <button class="back-btn light" id="backFromDash" style="margin:0;padding:6px 10px;font-size:12px;"><span>ğŸ </span></button>
            <div><p class="dash-greet"><span data-he="×©×œ×•×" data-en="Hello">×©×œ×•×</span> <span id="dashName"></span> ğŸ‘‹</p><h1 class="dash-title" data-he="×”×“×©×‘×•×¨×“ ×©×œ×š" data-en="Your Dashboard">×”×“×©×‘×•×¨×“ ×©×œ×š</h1></div>
          </div>
          <div class="head-acts"><div class="streak">ğŸ”¥ <span id="streakN">0</span></div><button class="set-btn" id="btnSettings">âš™ï¸</button></div>
        </div>
        <div class="stats">
          <div class="stat"><p class="stat-lbl" data-he="× ×§×•×“×•×ª" data-en="Points">× ×§×•×“×•×ª</p><p class="stat-val p" id="totPts">0</p></div>
          <div class="stat-div"></div>
          <div class="stat"><p class="stat-lbl" data-he="×©×•×•×™" data-en="Value">×©×•×•×™</p><p class="stat-val s" id="totMoney">â‚ª0</p></div>
          <div class="stat-div"></div>
          <div class="stat"><p class="stat-lbl" data-he="×“×™×œ×•×’×™×" data-en="Skips">×“×™×œ×•×’×™×</p><p class="stat-val a" id="totSkips">0</p></div>
        </div>
      </div>
      <div class="tabs">
        <button class="tab on" id="tabSum">ğŸ“Š <span data-he="×¡×™×›×•×" data-en="Summary">×¡×™×›×•×</span></button>
        <button class="tab" id="tabHis">ğŸ“ <span data-he="×”×™×¡×˜×•×¨×™×”" data-en="History">×”×™×¡×˜×•×¨×™×”</span></button>
        <button class="tab" id="tabInv">ğŸ’° <span data-he="×”×©×§×¢×•×ª" data-en="Invest">×”×©×§×¢×•×ª</span></button>
      </div>
      <div class="dash-content">
        <div id="sumContent">
          <div class="period-sel"><button class="period on" id="pWeek" data-he="×”×©×‘×•×¢" data-en="This Week">×”×©×‘×•×¢</button><button class="period" id="pMonth" data-he="×”×—×•×“×©" data-en="This Month">×”×—×•×“×©</button><button class="period" id="pYear" data-he="×”×©× ×”" data-en="This Year">×”×©× ×”</button></div>
          <div class="sum-grid"><div class="sum-card green"><p class="sum-lbl"><span data-he="× ×§×•×“×•×ª" data-en="Points">× ×§×•×“×•×ª</span> <span id="prdLbl" data-he="×”×©×‘×•×¢" data-en="This Week">×”×©×‘×•×¢</span></p><p class="sum-val p" id="prdPts">0</p></div><div class="sum-card orange"><p class="sum-lbl" data-he="×©×•×•×™" data-en="Value">×©×•×•×™</p><p class="sum-val s" id="prdMoney">â‚ª0</p></div></div>
          <div class="cat-card"><h4 class="cat-title">ğŸ“Š <span data-he="×œ×¤×™ ×§×˜×’×•×¨×™×”" data-en="By Category">×œ×¤×™ ×§×˜×’×•×¨×™×”</span></h4><div id="catsList"></div></div>
        </div>
        <div id="hisContent" class="hidden"><h3 class="sec-title" data-he="×”×“×™×œ×•×’×™× ×©×œ×š" data-en="Your Skips">×”×“×™×œ×•×’×™× ×©×œ×š</h3><div id="skipsList"></div></div>
      </div>
      <button class="fab" id="fabAdd">â­ï¸</button>
      <div class="modal" id="addModal">
        <div class="modal-box">
          <div class="modal-head"><h3 class="modal-title" id="modalTitle" data-he="â­ï¸ ×“×™×œ×’×ª?" data-en="â­ï¸ Skipped?">â­ï¸ ×“×™×œ×’×ª?</h3><button class="modal-del hidden" id="modalDel">ğŸ—‘ï¸</button></div>
          <p class="cats-lbl" data-he="×§×˜×’×•×¨×™×”" data-en="Category">×§×˜×’×•×¨×™×”</p><div class="cats-grid" id="catsGrid"></div>
          <input type="text" class="input" id="inItem" data-he-placeholder="×¢×œ ××” ×“×™×œ×’×ª?" data-en-placeholder="What did you skip?" style="margin-bottom:10px">
          <input type="number" class="input" id="inPrice" data-he-placeholder="×›××” ×–×” ×¢×œ×”? (â‚ª)" data-en-placeholder="How much was it? (â‚ª)">
          <div class="pts-prev hidden" id="ptsPreview"><p class="pts-prev-lbl" id="prevLbl" data-he="×ª×¦×‘×•×¨" data-en="You'll earn">×ª×¦×‘×•×¨</p><p class="pts-prev-val" id="prevPts">+0</p><p class="pts-prev-money" id="prevMoney">(â‚ª0)</p></div>
          <button class="btn-next" id="btnSave" data-he="×”×•×¡×£ â­ï¸" data-en="Add â­ï¸">×”×•×¡×£ â­ï¸</button>
          <button class="btn-cancel" id="btnCancelAdd" data-he="×‘×™×˜×•×œ" data-en="Cancel">×‘×™×˜×•×œ</button>
        </div>
      </div>
      <div class="confirm" id="delConfirm">
        <div class="confirm-box"><div class="confirm-icon">ğŸ—‘ï¸</div><h3 data-he="×œ××—×•×§?" data-en="Delete?">×œ××—×•×§?</h3><p id="delName" data-he="×”×“×™×œ×•×’ ×™×™××—×§." data-en="This skip will be deleted.">×”×“×™×œ×•×’ ×™×™××—×§.</p>
          <div class="confirm-btns"><button class="confirm-btn cancel" id="btnCancelDel" data-he="×‘×™×˜×•×œ" data-en="Cancel">×‘×™×˜×•×œ</button><button class="confirm-btn danger" id="btnConfirmDel" data-he="××—×§" data-en="Delete">××—×§</button></div>
        </div>
      </div>
    </div>
    
    <!-- SETTINGS -->
    <div class="screen settings-screen" id="s-set">
      <div class="set-head"><div class="set-head-inner"><button class="back-btn light" id="backFromSet"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button><h2 class="set-title" data-he="×”×’×“×¨×•×ª" data-en="Settings">×”×’×“×¨×•×ª</h2></div></div>
      <div class="set-content">
        <div class="set-card"><h4 class="set-card-title">ğŸ‘¤ <span data-he="×¤×¨×•×¤×™×œ" data-en="Profile">×¤×¨×•×¤×™×œ</span></h4><div class="set-row"><span class="set-lbl" data-he="×©×" data-en="Name">×©×</span><span class="set-val" id="setName">-</span></div><div class="set-row"><span class="set-lbl" data-he="×’×™×œ" data-en="Age">×’×™×œ</span><span class="set-val" id="setAge">-</span></div><div class="set-row"><span class="set-lbl" data-he="××¦×‘" data-en="Mode">××¦×‘</span><span class="set-val" id="setMode">-</span></div><div class="set-row"><span class="set-lbl" data-he="×©×¤×”" data-en="Language">×©×¤×”</span><span class="set-val" id="setLang">×¢×‘×¨×™×ª</span></div></div>
        <div class="set-card"><h4 class="set-card-title">ğŸ“Š <span data-he="×¡×˜×˜×™×¡×˜×™×§×•×ª" data-en="Statistics">×¡×˜×˜×™×¡×˜×™×§×•×ª</span></h4><div class="set-row"><span class="set-lbl" data-he="×“×™×œ×•×’×™×" data-en="Skips">×“×™×œ×•×’×™×</span><span class="set-val" id="setSkips" style="color:var(--primary)">0</span></div><div class="set-row"><span class="set-lbl" data-he="× ×§×•×“×•×ª" data-en="Points">× ×§×•×“×•×ª</span><span class="set-val" id="setPts" style="color:var(--primary)">0</span></div><div class="set-row"><span class="set-lbl" data-he="×©×•×•×™" data-en="Value">×©×•×•×™</span><span class="set-val" id="setMoney" style="color:var(--secondary)">â‚ª0</span></div></div>
        <button class="btn-set outline" id="btnTerms">ğŸ“‹ <span data-he="×ª× ××™ ×©×™××•×©" data-en="Terms of Use">×ª× ××™ ×©×™××•×©</span></button>
        <button class="btn-set outline" id="btnChangeLang">ğŸŒ <span data-he="×©× ×” ×©×¤×”" data-en="Change Language">×©× ×” ×©×¤×”</span></button>
        <button class="btn-set danger" id="btnReset">ğŸ—‘ï¸ <span data-he="××™×¤×•×¡" data-en="Reset">××™×¤×•×¡</span></button>
        <p class="ver">SKIP v1.0 Â© 2025</p>
      </div>
      <div class="confirm" id="resetConfirm">
        <div class="confirm-box"><div class="confirm-icon">âš ï¸</div><h3 data-he="×œ××¤×¡?" data-en="Reset?">×œ××¤×¡?</h3><p data-he="×›×œ ×”× ×ª×•× ×™× ×™×™××—×§×•." data-en="All data will be deleted.">×›×œ ×”× ×ª×•× ×™× ×™×™××—×§×•.</p>
          <div class="confirm-btns"><button class="confirm-btn cancel" id="btnCancelReset" data-he="×‘×™×˜×•×œ" data-en="Cancel">×‘×™×˜×•×œ</button><button class="confirm-btn danger" id="btnConfirmReset" data-he="××¤×¡" data-en="Reset">××¤×¡</button></div>
        </div>
      </div>
    </div>
    
    <!-- INVESTMENTS -->
    <div class="screen invest-screen" id="s-inv">
      <div class="inv-head">
        <div class="inv-head-inner"><button class="back-btn light" id="backFromInv"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button><h2 class="inv-title">ğŸ’° <span data-he="×”×©×§×¢×•×ª" data-en="Investments">×”×©×§×¢×•×ª</span></h2></div>
        <div class="inv-sum"><p class="inv-sum-lbl" data-he="×”×›×¡×£ ×©×—×¡×›×ª:" data-en="Money you saved:">×”×›×¡×£ ×©×—×¡×›×ª:</p><p class="inv-sum-val" id="invTot">â‚ª0</p></div>
      </div>
      <div class="inv-content">
        <div class="info-box hidden" id="u18inv"><p data-he="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ×©×ª×£ ××ª ×”×”×•×¨×™×!" data-en="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Share with your parents!">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ×©×ª×£ ××ª ×”×”×•×¨×™×!</p></div>
        <div class="warn-box"><p data-he="âš ï¸ ××™×“×¢ ×œ×”××—×©×” ×‘×œ×‘×“. ×”×ª×™×™×¢×¥ ×¢× ×™×•×¢×¥ ×¤×™× × ×¡×™." data-en="âš ï¸ For illustration only. Consult a financial advisor.">âš ï¸ ××™×“×¢ ×œ×”××—×©×” ×‘×œ×‘×“. ×”×ª×™×™×¢×¥ ×¢× ×™×•×¢×¥ ×¤×™× × ×¡×™.</p></div>
        <div id="platList"></div>
        <button class="btn-share hidden" id="btnShare" data-he="ğŸ“¤ ×©×ª×£ ×¢× ×”×”×•×¨×™×" data-en="ğŸ“¤ Share with parents">ğŸ“¤ ×©×ª×£ ×¢× ×”×”×•×¨×™×</button>
        <button class="btn-next" id="btnFinish" style="margin-top:20px;" data-he="ğŸ‰ ×¡×™×•× ×•×¡×™×›×•×" data-en="ğŸ‰ Finish & Summary">ğŸ‰ ×¡×™×•× ×•×¡×™×›×•×</button>
      </div>
    </div>
    
    <!-- SUMMARY -->
    <div class="screen summary-screen" id="s-summary">
      <button class="back-btn light" id="backFromSummary" style="position:absolute;top:40px;right:20px;z-index:10;"><span>âœ</span> <span data-he="×—×–×¨×”" data-en="Back">×—×–×¨×”</span></button>
      <div class="sum-head"><div class="sum-emoji">ğŸ†</div><h1 class="sum-title" data-he="×›×œ ×”×›×‘×•×“!" data-en="Great Job!">×›×œ ×”×›×‘×•×“!</h1><p class="sum-subtitle" data-he="×”× ×” ×”×¡×™×›×•× ×©×œ×š" data-en="Here's your summary">×”× ×” ×”×¡×™×›×•× ×©×œ×š</p></div>
      <div class="sum-content">
        <div class="sum-stats">
          <div class="sum-stat"><div class="sum-stat-icon">â­ï¸</div><p class="sum-stat-val" id="sumSkips">0</p><p class="sum-stat-lbl" data-he="×“×™×œ×•×’×™×" data-en="Skips">×“×™×œ×•×’×™×</p></div>
          <div class="sum-stat"><div class="sum-stat-icon">â­</div><p class="sum-stat-val" id="sumPts">0</p><p class="sum-stat-lbl" data-he="× ×§×•×“×•×ª" data-en="Points">× ×§×•×“×•×ª</p></div>
          <div class="sum-stat"><div class="sum-stat-icon">ğŸ’°</div><p class="sum-stat-val" id="sumMoney">â‚ª0</p><p class="sum-stat-lbl" data-he="× ×—×¡×š" data-en="Saved">× ×—×¡×š</p></div>
          <div class="sum-stat"><div class="sum-stat-icon">ğŸ”¥</div><p class="sum-stat-val" id="sumStreak">0</p><p class="sum-stat-lbl" data-he="×¨×¦×£" data-en="Streak">×¨×¦×£</p></div>
        </div>
        <div class="sum-message"><h3>ğŸ’¡ <span data-he="××” ×¢×›×©×™×•?" data-en="What's next?">××” ×¢×›×©×™×•?</span></h3><p id="sumTip" data-he="×”××©×š ×œ×“×œ×’ ×¢×œ ×”×•×¦××•×ª ××™×•×ª×¨×•×ª!" data-en="Keep skipping unnecessary expenses!">×”××©×š ×œ×“×œ×’ ×¢×œ ×”×•×¦××•×ª ××™×•×ª×¨×•×ª!</p></div>
        <div class="sum-actions">
          <button class="btn-sum primary" id="btnBackToDash" data-he="ğŸ  ×—×–×¨×” ×œ×“×©×‘×•×¨×“" data-en="ğŸ  Back to Dashboard">ğŸ  ×—×–×¨×” ×œ×“×©×‘×•×¨×“</button>
          <button class="btn-sum secondary" id="btnShareSum" data-he="ğŸ“¤ ×©×ª×£ ××ª ×”×”×™×©×’" data-en="ğŸ“¤ Share Achievement">ğŸ“¤ ×©×ª×£ ××ª ×”×”×™×©×’</button>
          <button class="btn-sum outline" id="btnNewGame" data-he="ğŸ”„ ×”×ª×—×œ ××—×“×© (×××¤×¡ × ×ª×•× ×™×)" data-en="ğŸ”„ Start Over (resets data)">ğŸ”„ ×”×ª×—×œ ××—×“×© (×××¤×¡ × ×ª×•× ×™×)</button>
        </div>
      </div>
    </div>
    
  </div>

<script>
let app={termsAccepted:false,name:'',age:null,mode:null,time:null,points:0,streak:0,skips:[],period:'week',editId:null,lang:'he'};
let selectedCat=null;

const CATS=[
  {id:'food',name:{he:'××•×›×œ',en:'Food'},icon:'ğŸ”',color:'#FF6B6B'},
  {id:'fashion',name:{he:'××•×¤× ×”',en:'Fashion'},icon:'ğŸ‘•',color:'#9B59B6'},
  {id:'fun',name:{he:'×‘×™×œ×•×™×™×',en:'Entertainment'},icon:'ğŸ¬',color:'#3498DB'},
  {id:'tech',name:{he:'×˜×›× ×•×œ×•×’×™×”',en:'Technology'},icon:'ğŸ“±',color:'#1ABC9C'},
  {id:'beauty',name:{he:'×™×•×¤×™',en:'Beauty'},icon:'ğŸ’„',color:'#E91E63'},
  {id:'transport',name:{he:'×ª×—×‘×•×¨×”',en:'Transport'},icon:'ğŸš—',color:'#FF9800'},
  {id:'subs',name:{he:'×× ×•×™×™×',en:'Subscriptions'},icon:'ğŸ“º',color:'#673AB7'},
  {id:'impulse',name:{he:'××™××¤×•×œ×¡×™×‘×™',en:'Impulse'},icon:'ğŸ›’',color:'#F44336'},
  {id:'social',name:{he:'×—×‘×¨×ª×™',en:'Social'},icon:'ğŸ',color:'#4CAF50'},
  {id:'other',name:{he:'××—×¨',en:'Other'},icon:'ğŸ“¦',color:'#607D8B'}
];

const PLAT_ADULT=[
  {name:'Pillow',icon:'ğŸ›‹ï¸',desc:{he:'×”×©×§×¢×•×ª ×¤×¡×™×‘×™×•×ª',en:'Passive investments'},tags:['×ª×™×§×™× ××•×›× ×™×'],note:{he:'××•××œ×¥ ×œ××ª×—×™×œ×™×',en:'Recommended for beginners'},cls:'gold',url:'https://www.pillow.co.il',phone:'',cat:'×¤×¡×™×‘×™'},
  {name:'Sharesies',icon:'ğŸ“Š',desc:{he:'×× ×™×•×ª ×•×§×¨× ×•×ª ×¡×œ',en:'Stocks & ETFs'},tags:['×œ×œ× ×¢××œ×•×ª'],note:{he:'××ª××™× ×œ×¦×¢×™×¨×™×',en:'Great for young adults'},cls:'gold',url:'https://www.sharesies.co.il',phone:'',cat:'×¤×¡×™×‘×™'},
  {name:'eToro',icon:'ğŸŒ',desc:{he:'×¤×œ×˜×¤×•×¨××” ×’×œ×•×‘×œ×™×ª',en:'Global platform'},tags:['CopyTrader','×§×¨×™×¤×˜×•'],note:{he:'×œ××ª×§×“××™×',en:'For advanced users'},cls:'gold',url:'https://www.etoro.com/he',phone:'',cat:'××¡×—×¨'},
  {name:'Interactive Brokers',icon:'ğŸ“ˆ',desc:{he:'×‘×¨×•×§×¨ ××§×¦×•×¢×™',en:'Professional broker'},tags:['×¢××œ×•×ª × ××•×›×•×ª'],note:{he:'×œ××©×§×™×¢×™× ×¨×¦×™× ×™×™×',en:'For serious investors'},cls:'gold',url:'https://www.interactivebrokers.com',phone:'',cat:'××¡×—×¨'},
  {name:'×§×•×¤×ª ×’××œ - ××™×˜×‘',icon:'ğŸ¦',desc:{he:'×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”',en:'Investment savings fund'},tags:['×”×˜×‘×•×ª ××¡'],note:{he:'×—×™×¡×›×•×Ÿ ×¤× ×¡×™×•× ×™',en:'Pension savings'},cls:'gold',url:'https://www.meitav.co.il',phone:'*6411',cat:'×¤× ×¡×™×”'},
  {name:'Bit2C',icon:'â‚¿',desc:{he:'×‘×•×¨×¡×ª ×§×¨×™×¤×˜×• ×™×©×¨××œ×™×ª',en:'Israeli crypto exchange'},tags:['×‘×™×˜×§×•×™×Ÿ'],note:{he:'×§×¨×™×¤×˜×• ×‘×™×©×¨××œ',en:'Crypto in Israel'},cls:'gold',url:'https://www.bit2c.co.il',phone:'',cat:'×§×¨×™×¤×˜×•'}
];

const PLAT_MINOR=[
  {name:{he:'×—×™×¡×›×•×Ÿ ×œ×›×œ ×™×œ×“',en:'Child Savings Plan'},icon:'ğŸ‘¶',desc:{he:'×ª×•×›× ×™×ª ×××©×œ×ª×™×ª',en:'Government program'},tags:['××•×‘×˜×—'],note:{he:'×›×œ ×™×œ×“ ×–×›××™!',en:'Every child is eligible!'},cls:'green',url:'https://www.btl.gov.il',phone:'*6050',cat:'×××©×œ×ª×™'},
  {name:{he:'×‘× ×§ ×”×¤×•×¢×œ×™× - × ×•×¢×¨',en:'Bank Hapoalim - Youth'},icon:'ğŸ¦',desc:{he:'×—×©×‘×•×Ÿ × ×•×¢×¨',en:'Youth account'},tags:['×›×¨×˜×™×¡ ××©×¨××™'],note:{he:'×œ×œ× ×¢××œ×•×ª',en:'No fees'},cls:'green',url:'https://www.bankhapoalim.co.il',phone:'*2407',cat:'×‘× ×§'},
  {name:{he:'×‘× ×§ ×œ××•××™ - × ×•×¢×¨',en:'Bank Leumi - Youth'},icon:'ğŸ›ï¸',desc:{he:'×—×©×‘×•×Ÿ ×¦×¢×™×¨×™×',en:'Youth account'},tags:['×”×˜×‘×•×ª'],note:{he:'××’×™×œ 12',en:'From age 12'},cls:'green',url:'https://www.leumi.co.il',phone:'*5522',cat:'×‘× ×§'},
  {name:{he:'×§×•×¤×ª ×’××œ - ××™×˜×‘',en:'Meitav - Savings Fund'},icon:'ğŸ“',desc:{he:'×—×™×¡×›×•×Ÿ ×œ×˜×•×•×— ××¨×•×š',en:'Long-term savings'},tags:['×”×˜×‘×•×ª ××¡'],note:{he:'×”×”×•×¨×™× ×¤×•×ª×—×™×',en:'Parents open'},cls:'green',url:'https://www.meitav.co.il',phone:'*6411',cat:'×—×™×¡×›×•×Ÿ'}
];

const T={
  noData:{he:'×¢×“×™×™×Ÿ ××™×Ÿ × ×ª×•× ×™×',en:'No data yet'},
  noSkips:{he:'×¢×“×™×™×Ÿ ×œ× ×“×™×œ×’×ª.',en:"You haven't skipped yet."},
  clickSkip:{he:'×œ×—×¥ ×¢×œ â­ï¸!',en:'Click â­ï¸!'},
  pts:{he:'× ×§×³',en:'pts'},
  solo:{he:'×™×—×™×“',en:'Solo'},
  group:{he:'×§×‘×•×¦×”',en:'Group'},
  weekly:{he:'×©×‘×•×¢×™',en:'Weekly'},
  monthly:{he:'×—×•×“×©×™',en:'Monthly'},
  yearly:{he:'×©× ×ª×™',en:'Yearly'},
  enterName:{he:'×™×© ×œ×”×–×™×Ÿ ×©×',en:'Please enter your name'},
  enterAge:{he:'×™×© ×œ×”×–×™×Ÿ ×’×™×œ ×ª×§×™×Ÿ (10-99)',en:'Please enter a valid age (10-99)'},
  enterItem:{he:'×™×© ×œ×”×–×™×Ÿ ×¢×œ ××” ×“×™×œ×’×ª',en:'Please enter what you skipped'},
  enterPrice:{he:'×™×© ×œ×”×–×™×Ÿ ××—×™×¨',en:'Please enter the price'},
  selectCat:{he:'×™×© ×œ×‘×—×•×¨ ×§×˜×’×•×¨×™×”',en:'Please select a category'},
  confirmReset:{he:'×œ×”×ª×—×™×œ ××—×“×©? ×›×œ ×”× ×ª×•× ×™× ×™×™××—×§×• ×œ×¦××™×ª×•×ª.',en:'Start over? All data will be permanently deleted.'},
  tip1:{he:'×•×•××•! ×—×¡×›×ª ×¡×›×•× ××©××¢×•×ª×™! ×–×” ×”×–××Ÿ ×œ×—×©×•×‘ ×¢×œ ×”×©×§×¢×” ×××™×ª×™×ª.',en:'Wow! You saved a significant amount! Time to think about real investments.'},
  tip2:{he:'×™×¤×” ×××•×“! ×”××©×š ×›×š ×•×ª×’×™×¢ ×œ×¡×›×•××™× ×’×“×•×œ×™×.',en:'Great job! Keep going and reach bigger amounts.'},
  tip3:{he:'××ª×” ×¢×œ ×”×“×¨×š ×”× ×›×•× ×”! ×”××©×š ×œ×“×œ×’ ×•×œ×¦×‘×•×¨ × ×§×•×“×•×ª.',en:"You're on the right track! Keep skipping and earning points."},
  tip4:{he:'×”×ª×—×œ×” ×˜×•×‘×”! ×”××©×š ×œ×ª×¨×’×œ ××ª ×›×™×©×•×¨×™ ×”×—×™×¡×›×•×Ÿ ×©×œ×š.',en:'Good start! Keep practicing your saving skills.'},
  shareText:{he:'×”×™×™! ×× ×™ ××©×ª××©/×ª ×‘-SKIP. ×¦×‘×¨×ª×™ {pts} × ×§×•×“×•×ª (â‚ª{money}) ×-{skips} ×“×™×œ×•×’×™×! ×”×¦×˜×¨×¤×• ×’×: {url}',en:'Hey! I use SKIP. I earned {pts} points (â‚ª{money}) from {skips} skips! Join too: {url}'},
  shareAchieve:{he:'ğŸ† ×”×™×©×’ ×‘-SKIP!\n\nâ­ï¸ {skips} ×“×™×œ×•×’×™×\nâ­ {pts} × ×§×•×“×•×ª\nğŸ’° â‚ª{money} × ×—×¡×š\nğŸ”¥ {streak} ×¨×¦×£\n\n×”×¦×˜×¨×¤×• ×’×!',en:'ğŸ† SKIP Achievement!\n\nâ­ï¸ {skips} skips\nâ­ {pts} points\nğŸ’° â‚ª{money} saved\nğŸ”¥ {streak} streak\n\nJoin us!'},
  groupInvite:{he:'×”×™×™! ×‘×•×/×™ × ×©×—×§ ×™×—×“ ×‘-SKIP ×•× ×ª×—×¨×” ××™ ×—×•×¡×š ×™×•×ª×¨! ğŸ’°â­ï¸',en:"Hey! Let's play SKIP together and compete who saves more! ğŸ’°â­ï¸"},
  copied:{he:'×”×œ×™× ×§ ×”×•×¢×ª×§!',en:'Link copied!'}
};

function t(key){return T[key]?T[key][app.lang]||T[key].he:key;}
function save(){try{localStorage.setItem('skip_data',JSON.stringify(app));}catch(e){}}
function load(){try{const d=localStorage.getItem('skip_data');if(d){app=JSON.parse(d);return true;}}catch(e){}return false;}

function setLang(lang){
  app.lang=lang;
  save();
  document.body.classList.toggle('en',lang==='en');
  document.documentElement.lang=lang;
  document.documentElement.dir=lang==='he'?'rtl':'ltr';
  
  document.querySelectorAll('[data-'+lang+']').forEach(el=>{
    el.textContent=el.getAttribute('data-'+lang);
  });
  document.querySelectorAll('[data-'+lang+'-placeholder]').forEach(el=>{
    el.placeholder=el.getAttribute('data-'+lang+'-placeholder');
  });
  
  updateTermsBtn();
  if(document.getElementById('setLang'))document.getElementById('setLang').textContent=lang==='he'?'×¢×‘×¨×™×ª':'English';
}

function goTo(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  const el=document.getElementById(id);if(el)el.classList.add('active');
  if(id==='s-dash')updateDash();if(id==='s-set')updateSet();if(id==='s-inv')updateInv();if(id==='s-summary')updateSummary();
}

function updateTermsBtn(){
  const chk=document.getElementById('chkTerms');const btn=document.getElementById('btnAccept');
  const onKey='data-'+app.lang+'-on',offKey='data-'+app.lang+'-off';
  if(chk.checked){btn.classList.add('enabled');btn.textContent=btn.getAttribute(onKey);}
  else{btn.classList.remove('enabled');btn.textContent=btn.getAttribute(offKey);}
}
function acceptTerms(){if(!document.getElementById('chkTerms').checked){alert(app.lang==='he'?'×™×© ×œ×¡××Ÿ ××ª ×ª×™×‘×ª ×”××™×©×•×¨':'Please check the agreement box');return;}app.termsAccepted=true;save();goTo('s-splash');}
function saveName(){const v=document.getElementById('inName').value.trim();if(!v){alert(t('enterName'));return;}app.name=v;save();goTo('s-age');}
function checkAge(){const age=parseInt(document.getElementById('inAge').value);document.getElementById('u18info').classList.toggle('hidden',!(age>0&&age<18));}
function saveAge(){const age=parseInt(document.getElementById('inAge').value);if(!age||age<10||age>99){alert(t('enterAge'));return;}app.age=age;document.getElementById('greetName').textContent=app.name;save();goTo('s-mode');}
function setMode(m){app.mode=m;if(m==='group'){document.getElementById('groupShare').classList.remove('hidden');}else{save();goTo('s-time');}}
function continueFromMode(){save();goTo('s-time');}
function setTime(ti){app.time=ti;save();goTo('s-dash');}

function updateDash(){
  document.getElementById('dashName').textContent=app.name;
  document.getElementById('streakN').textContent=app.streak;
  document.getElementById('totPts').textContent=app.points;
  document.getElementById('totMoney').textContent='â‚ª'+Math.round(app.points*0.5);
  document.getElementById('totSkips').textContent=app.skips.length;
  updatePeriod();updateSkips();
}
function switchTab(tab){
  document.getElementById('tabSum').classList.toggle('on',tab==='sum');
  document.getElementById('tabHis').classList.toggle('on',tab==='his');
  document.getElementById('sumContent').classList.toggle('hidden',tab!=='sum');
  document.getElementById('hisContent').classList.toggle('hidden',tab!=='his');
}
function setPeriod(p){
  app.period=p;
  document.getElementById('pWeek').classList.toggle('on',p==='week');
  document.getElementById('pMonth').classList.toggle('on',p==='month');
  document.getElementById('pYear').classList.toggle('on',p==='year');
  const lbls={week:{he:'×”×©×‘×•×¢',en:'This Week'},month:{he:'×”×—×•×“×©',en:'This Month'},year:{he:'×”×©× ×”',en:'This Year'}};
  document.getElementById('prdLbl').textContent=lbls[p][app.lang];
  updatePeriod();
}
function updatePeriod(){
  const now=new Date();
  const filtered=app.skips.filter(s=>{const d=new Date(s.date);if(app.period==='week')return d>=new Date(now.getTime()-7*24*60*60*1000);if(app.period==='month')return d>=new Date(now.getFullYear(),now.getMonth()-1,now.getDate());return d>=new Date(now.getFullYear()-1,now.getMonth(),now.getDate());});
  const pts=filtered.reduce((sum,s)=>sum+s.pts,0);
  document.getElementById('prdPts').textContent=pts;
  document.getElementById('prdMoney').textContent='â‚ª'+Math.round(pts*0.5);
  const byCat={};filtered.forEach(s=>{byCat[s.cat]=(byCat[s.cat]||0)+s.pts;});
  const catsList=document.getElementById('catsList');
  if(Object.keys(byCat).length===0){catsList.innerHTML='<p style="text-align:center;color:var(--text-light);padding:15px;font-size:13px">'+t('noData')+'</p>';}
  else{catsList.innerHTML=Object.entries(byCat).sort((a,b)=>b[1]-a[1]).map(([id,pts])=>{const c=CATS.find(x=>x.id===id)||{icon:'ğŸ“¦',name:{he:'××—×¨',en:'Other'}};return'<div class="cat-item"><div class="cat-info"><span class="cat-icon">'+c.icon+'</span><span class="cat-name">'+c.name[app.lang]+'</span></div><span class="cat-pts">'+pts+' '+t('pts')+'</span></div>';}).join('');}
}
function updateSkips(){
  const list=document.getElementById('skipsList');
  if(app.skips.length===0){list.innerHTML='<div class="empty"><div class="empty-icon">ğŸ¯</div><p>'+t('noSkips')+'<br>'+t('clickSkip')+'</p></div>';}
  else{list.innerHTML=app.skips.slice().reverse().map(s=>{const c=CATS.find(x=>x.id===s.cat)||{icon:'ğŸ“¦',name:{he:'××—×¨',en:'Other'},color:'#607D8B'};return'<div class="skip" data-id="'+s.id+'"><div class="skip-icon" style="background:'+c.color+'20">'+c.icon+'</div><div class="skip-det"><p class="skip-name">'+s.item+'</p><p class="skip-meta">â‚ª'+s.price+' â€¢ '+c.name[app.lang]+'</p></div><span class="skip-pts">+'+s.pts+'</span></div>';}).join('');document.querySelectorAll('.skip').forEach(el=>{el.addEventListener('click',()=>openEdit(parseInt(el.dataset.id)));});}
}
function buildCats(){
  const grid=document.getElementById('catsGrid');
  grid.innerHTML=CATS.map(c=>'<div class="cat-opt" data-id="'+c.id+'"><div class="cat-opt-icon">'+c.icon+'</div><div class="cat-opt-name">'+c.name[app.lang]+'</div></div>').join('');
  document.querySelectorAll('.cat-opt').forEach(el=>{el.addEventListener('click',()=>pickCat(el.dataset.id));});
}
function pickCat(id){selectedCat=id;document.querySelectorAll('.cat-opt').forEach(el=>el.classList.toggle('sel',el.dataset.id===id));}
function updatePreview(){
  const price=parseFloat(document.getElementById('inPrice').value);const prev=document.getElementById('ptsPreview');
  if(price>0){const pts=Math.round(price*0.5);document.getElementById('prevPts').textContent='+'+pts+' '+(app.lang==='he'?'× ×§×•×“×•×ª':'points');document.getElementById('prevMoney').textContent='(â‚ª'+Math.round(pts*0.5)+')';prev.classList.remove('hidden');}else{prev.classList.add('hidden');}
}
function openAdd(){
  app.editId=null;selectedCat=null;
  document.getElementById('modalTitle').textContent=app.lang==='he'?'â­ï¸ ×“×™×œ×’×ª?':'â­ï¸ Skipped?';
  document.getElementById('modalDel').classList.add('hidden');
  document.getElementById('btnSave').textContent=app.lang==='he'?'×”×•×¡×£ â­ï¸':'Add â­ï¸';
  document.getElementById('prevLbl').textContent=app.lang==='he'?'×ª×¦×‘×•×¨':"You'll earn";
  document.getElementById('inItem').value='';document.getElementById('inPrice').value='';
  document.getElementById('ptsPreview').classList.add('hidden');
  document.querySelectorAll('.cat-opt').forEach(el=>el.classList.remove('sel'));
  buildCats();document.getElementById('addModal').classList.add('on');
}
function openEdit(id){
  const s=app.skips.find(x=>x.id===id);if(!s)return;
  app.editId=id;selectedCat=s.cat;
  document.getElementById('modalTitle').textContent=app.lang==='he'?'âœï¸ ×¢×¨×™×›×”':'âœï¸ Edit';
  document.getElementById('modalDel').classList.remove('hidden');
  document.getElementById('btnSave').textContent=app.lang==='he'?'×©××•×¨':'Save';
  document.getElementById('prevLbl').textContent=app.lang==='he'?'× ×§×•×“×•×ª':'Points';
  document.getElementById('inItem').value=s.item;document.getElementById('inPrice').value=s.price;
  buildCats();document.querySelector('.cat-opt[data-id="'+s.cat+'"]').classList.add('sel');
  updatePreview();document.getElementById('addModal').classList.add('on');
}
function closeAdd(){document.getElementById('addModal').classList.remove('on');}
function saveSkip(){
  const item=document.getElementById('inItem').value.trim();const price=parseFloat(document.getElementById('inPrice').value);
  if(!item){alert(t('enterItem'));return;}if(!price||price<=0){alert(t('enterPrice'));return;}if(!selectedCat){alert(t('selectCat'));return;}
  const pts=Math.round(price*0.5);
  if(app.editId){const s=app.skips.find(x=>x.id===app.editId);if(s){app.points-=s.pts;app.points+=pts;s.item=item;s.price=price;s.pts=pts;s.cat=selectedCat;}}
  else{app.skips.push({id:Date.now(),item:item,price:price,pts:pts,cat:selectedCat,date:new Date().toISOString()});app.points+=pts;app.streak++;}
  save();closeAdd();updateDash();
}
function openDel(){const s=app.skips.find(x=>x.id===app.editId);if(s)document.getElementById('delName').textContent='"'+s.item+'" '+(app.lang==='he'?'×™×™××—×§.':'will be deleted.');document.getElementById('delConfirm').classList.add('on');}
function closeDel(){document.getElementById('delConfirm').classList.remove('on');}
function doDel(){const s=app.skips.find(x=>x.id===app.editId);if(s){app.points-=s.pts;app.skips=app.skips.filter(x=>x.id!==app.editId);}save();closeDel();closeAdd();updateDash();}
function updateSet(){
  document.getElementById('setName').textContent=app.name||'-';
  document.getElementById('setAge').textContent=app.age||'-';
  const mTxt=app.mode==='solo'?t('solo'):t('group');
  const tTxt={week:t('weekly'),month:t('monthly'),year:t('yearly')}[app.time]||'-';
  document.getElementById('setMode').textContent=mTxt+' â€¢ '+tTxt;
  document.getElementById('setSkips').textContent=app.skips.length;
  document.getElementById('setPts').textContent=app.points;
  document.getElementById('setMoney').textContent='â‚ª'+Math.round(app.points*0.5);
  document.getElementById('setLang').textContent=app.lang==='he'?'×¢×‘×¨×™×ª':'English';
}
function openReset(){document.getElementById('resetConfirm').classList.add('on');}
function closeReset(){document.getElementById('resetConfirm').classList.remove('on');}
function doReset(){localStorage.removeItem('skip_data');app={termsAccepted:false,name:'',age:null,mode:null,time:null,points:0,streak:0,skips:[],period:'week',editId:null,lang:'he'};document.getElementById('inName').value='';document.getElementById('inAge').value='';document.getElementById('chkTerms').checked=false;closeReset();goTo('s-lang');}
function updateInv(){
  document.getElementById('invTot').textContent='â‚ª'+Math.round(app.points*0.5);
  const isAdult=app.age>=18;const plats=isAdult?PLAT_ADULT:PLAT_MINOR;
  document.getElementById('u18inv').classList.toggle('hidden',isAdult);
  document.getElementById('btnShare').classList.toggle('hidden',isAdult);
  const grouped={};plats.forEach(p=>{if(!grouped[p.cat])grouped[p.cat]=[];grouped[p.cat].push(p);});
  const titles=isAdult?{'×¤×¡×™×‘×™':'ğŸ›‹ï¸','××¡×—×¨':'ğŸ“ˆ','×¤× ×¡×™×”':'ğŸ¦','×§×¨×™×¤×˜×•':'â‚¿'}:{'×××©×œ×ª×™':'ğŸ›ï¸','×‘× ×§':'ğŸ¦','×—×™×¡×›×•×Ÿ':'ğŸ’°'};
  let html='';
  Object.entries(grouped).forEach(([cat,items])=>{
    html+='<h3 class="sec-title">'+titles[cat]+' '+cat+'</h3>';
    items.forEach(p=>{
      const name=typeof p.name==='object'?p.name[app.lang]:p.name;
      const desc=typeof p.desc==='object'?p.desc[app.lang]:p.desc;
      const note=typeof p.note==='object'?p.note[app.lang]:p.note;
      let tags='';if(p.tags)tags='<div class="plat-tags">'+p.tags.map(t=>'<span class="plat-tag">'+t+'</span>').join('')+'</div>';
      const icon=p.cls==='gold'?'âœ¨':'ğŸ“';
      let links='<div class="plat-links">';if(p.url)links+='<a href="'+p.url+'" target="_blank" class="plat-link">ğŸŒ '+(app.lang==='he'?'×œ××ª×¨':'Website')+'</a>';if(p.phone)links+='<a href="tel:'+p.phone.replace('*','')+'" class="plat-link">ğŸ“ '+p.phone+'</a>';links+='</div>';
      html+='<div class="plat"><div class="plat-icon">'+p.icon+'</div><div class="plat-info"><p class="plat-name">'+name+'</p><p class="plat-desc">'+desc+'</p>'+tags+'<p class="plat-note '+p.cls+'">'+icon+' '+note+'</p>'+links+'</div></div>';
    });
  });
  document.getElementById('platList').innerHTML=html;
}
function shareApp(method){
  const url='https://skip-app.netlify.app';
  const text=t('groupInvite')+'\n'+url;
  if(method==='whatsapp'){window.open('https://wa.me/?text='+encodeURIComponent(text),'_blank');}
  else if(method==='email'){window.open('mailto:?subject=SKIP App&body='+encodeURIComponent(text),'_blank');}
  else{navigator.clipboard.writeText(url).then(()=>alert(t('copied')));}
}
function share(){
  const txt=t('shareText').replace('{pts}',app.points).replace('{money}',Math.round(app.points*0.5)).replace('{skips}',app.skips.length).replace('{url}','https://skip-app.netlify.app');
  if(navigator.share)navigator.share({title:'SKIP',text:txt});else alert(txt);
}
function updateSummary(){
  document.getElementById('sumSkips').textContent=app.skips.length;
  document.getElementById('sumPts').textContent=app.points;
  document.getElementById('sumMoney').textContent='â‚ª'+Math.round(app.points*0.5);
  document.getElementById('sumStreak').textContent=app.streak;
  const money=Math.round(app.points*0.5);let tip='';
  if(money>=500)tip=t('tip1');else if(money>=100)tip=t('tip2');else if(app.skips.length>=10)tip=t('tip3');else tip=t('tip4');
  document.getElementById('sumTip').textContent=tip;
}
function shareSummary(){
  const txt=t('shareAchieve').replace('{skips}',app.skips.length).replace('{pts}',app.points).replace('{money}',Math.round(app.points*0.5)).replace('{streak}',app.streak);
  if(navigator.share)navigator.share({title:'SKIP',text:txt});else alert(txt);
}
function newGame(){if(confirm(t('confirmReset'))){doReset();}}

function setupEvents(){
  document.getElementById('btnLangHe').addEventListener('click',()=>{setLang('he');goTo('s-terms');});
  document.getElementById('btnLangEn').addEventListener('click',()=>{setLang('en');goTo('s-terms');});
  document.getElementById('chkTerms').addEventListener('change',updateTermsBtn);
  document.getElementById('btnAccept').addEventListener('click',acceptTerms);
  document.getElementById('backToTerms').addEventListener('click',()=>goTo('s-terms'));
  document.getElementById('btnStart').addEventListener('click',()=>goTo('s-name'));
  document.getElementById('backToSplash').addEventListener('click',()=>goTo('s-splash'));
  document.getElementById('btnName').addEventListener('click',saveName);
  document.getElementById('backToName').addEventListener('click',()=>goTo('s-name'));
  document.getElementById('inAge').addEventListener('input',checkAge);
  document.getElementById('btnAge').addEventListener('click',saveAge);
  document.getElementById('backToAge').addEventListener('click',()=>goTo('s-age'));
  document.getElementById('modeSolo').addEventListener('click',()=>{setMode('solo');});
  document.getElementById('modeGroup').addEventListener('click',()=>{setMode('group');});
  document.getElementById('shareWhatsapp').addEventListener('click',()=>{shareApp('whatsapp');continueFromMode();});
  document.getElementById('shareEmail').addEventListener('click',()=>{shareApp('email');continueFromMode();});
  document.getElementById('shareCopy').addEventListener('click',()=>{shareApp('copy');continueFromMode();});
  document.getElementById('backToMode').addEventListener('click',()=>goTo('s-mode'));
  document.getElementById('timeWeek').addEventListener('click',()=>setTime('week'));
  document.getElementById('timeMonth').addEventListener('click',()=>setTime('month'));
  document.getElementById('timeYear').addEventListener('click',()=>setTime('year'));
  document.getElementById('btnSettings').addEventListener('click',()=>goTo('s-set'));
  document.getElementById('tabSum').addEventListener('click',()=>switchTab('sum'));
  document.getElementById('tabHis').addEventListener('click',()=>switchTab('his'));
  document.getElementById('tabInv').addEventListener('click',()=>goTo('s-inv'));
  document.getElementById('pWeek').addEventListener('click',()=>setPeriod('week'));
  document.getElementById('pMonth').addEventListener('click',()=>setPeriod('month'));
  document.getElementById('pYear').addEventListener('click',()=>setPeriod('year'));
  document.getElementById('fabAdd').addEventListener('click',openAdd);
  document.getElementById('backFromDash').addEventListener('click',()=>{save();goTo('s-splash');});
  document.getElementById('inPrice').addEventListener('input',updatePreview);
  document.getElementById('btnSave').addEventListener('click',saveSkip);
  document.getElementById('btnCancelAdd').addEventListener('click',closeAdd);
  document.getElementById('modalDel').addEventListener('click',openDel);
  document.getElementById('btnCancelDel').addEventListener('click',closeDel);
  document.getElementById('btnConfirmDel').addEventListener('click',doDel);
  document.getElementById('backFromSet').addEventListener('click',()=>goTo('s-dash'));
  document.getElementById('btnTerms').addEventListener('click',()=>goTo('s-terms'));
  document.getElementById('btnChangeLang').addEventListener('click',()=>goTo('s-lang'));
  document.getElementById('btnReset').addEventListener('click',openReset);
  document.getElementById('btnCancelReset').addEventListener('click',closeReset);
  document.getElementById('btnConfirmReset').addEventListener('click',doReset);
  document.getElementById('backFromInv').addEventListener('click',()=>goTo('s-dash'));
  document.getElementById('btnShare').addEventListener('click',share);
  document.getElementById('btnFinish').addEventListener('click',()=>goTo('s-summary'));
  document.getElementById('backFromSummary').addEventListener('click',()=>goTo('s-inv'));
  document.getElementById('btnBackToDash').addEventListener('click',()=>{save();goTo('s-dash');});
  document.getElementById('btnNewGame').addEventListener('click',newGame);
  document.getElementById('btnShareSum').addEventListener('click',shareSummary);
}

function init(){
  setupEvents();
  if(load()&&app.termsAccepted){
    setLang(app.lang||'he');
    if(app.time)goTo('s-dash');
    else if(app.age){document.getElementById('greetName').textContent=app.name;goTo('s-mode');}
    else if(app.name)goTo('s-age');
    else goTo('s-splash');
  }
}
if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js').catch(e=>console.log('SW error:',e));}
init();
</script>
</body>
</html>
